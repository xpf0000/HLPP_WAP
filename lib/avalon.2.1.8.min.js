!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports["avalon"]=b():a["avalon"]=b()}(this,function(){return function(a){function c(d){if(b[d])return b[d].exports;var e=b[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,c),e.loaded=!0,e.exports}var b={};return c.m=a,c.c=b,c.p="",c(0)}([function(a,b,c){var d=c(1);c(8),c(14),c(19),c(35),c(66),d.onComponentDispose=c(74),c(76),a.exports=d},function(a,b,c){var d,e;c(2),d=c(3),e=c(4),d.shadowCopy(d,e),c(5),c(6),c(7),a.exports=d},function(a){function k(a,b,c){var d="for(var "+a+"i=0,n = this.length; i < n; i++){"+b.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+c;return Function("fn,scope",d)}var d,e,f,g,h,i,l,m,n,c=Object.prototype.hasOwnProperty;"司徒正美".trim||(d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(d,"")}),e=!{toString:null}.propertyIsEnumerable("toString"),f=function(){}.propertyIsEnumerable("prototype"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=g.length,Object.keys||(Object.keys=function(a){var i,j,k,l,m,n,b=[],d=f&&"function"==typeof a;if("string"==typeof a||a&&a.callee)for(i=0;i<a.length;++i)b.push(String(i));else for(j in a)d&&"prototype"===j||!c.call(a,j)||b.push(String(j));if(e)for(k=a.constructor,l=k&&k.prototype===a,m=0;h>m;m++)n=g[m],l&&"constructor"===n||!c.call(a,n)||b.push(n);return b}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.isArray.bind||(Function.prototype.bind=function(a){if(arguments.length<2&&void 0===a)return this;var b=this,c=arguments;return function(){var e,d=[];for(e=1;e<c.length;e++)d.push(c[e]);for(e=0;e<arguments.length;e++)d.push(arguments[e]);return b.apply(a,d)}}),i=Array.prototype.slice;try{i.call(document.documentElement)}catch(j){Array.prototype.slice=function(a,b){var c,e,d,f,g,h;if(b="undefined"!=typeof b?b:this.length,Array.isArray(this))return i.call(this,a,b);if(d=[],f=this.length,g=a||0,g=g>=0?g:f+g,h=b?b:f,0>b&&(h=f+b),e=h-g,e>0)if(d=new Array(e),this.charAt)for(c=0;e>c;c++)d[c]=this.charAt(g+c);else for(c=0;e>c;c++)d[c]=this[g+c];return d}}if(l=Array.prototype,!/\[native code\]/.test(l.map)){m={indexOf:function(a,b){var c=this.length,d=~~b;for(0>d&&(d+=c);c>d;d++)if(this[d]===a)return d;return-1},lastIndexOf:function(a,b){var c=this.length,d=null==b?c-1:b;for(0>d&&(d=Math.max(0,c+d));d>=0;d--)if(this[d]===a)return d;return-1},forEach:k("","_",""),filter:k("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:k("r=[],","r[i]=_","return r"),some:k("","if(_)return true","return false"),every:k("","if(!_)return false","return true")};for(n in m)l[n]=m[n]}a.exports={}},function(a,b){!function(b){function c(a){return new c.init(a)}var d,e;b.avalon=c,"undefined"!=typeof window&&(window.avalon=c),c.init=function(a){this[0]=this.element=a},c.fn=c.prototype=c.init.prototype,c.shadowCopy=function(a,b){for(var c in b)a[c]=b[c];return a},d=/[^, ]+/g,e=b.console,c.shadowCopy(c,{noop:function(){},rword:d,inspect:{}.toString,ohasOwn:{}.hasOwnProperty,log:function(){e&&c.config.debug&&Function.apply.call(console.log,console,arguments)},warn:function(){if(e&&c.config.debug){var a=console.warn||console.log;Function.apply.call(a,console,arguments)}},error:function(a,b){throw(b||Error)(a)},oneObject:function(a,b){var c,e,f,g;for("string"==typeof a&&(a=a.match(d)||[]),c={},e=void 0!==b?b:1,f=0,g=a.length;g>f;f++)c[a[f]]=e;return c}}),a.exports=c}.call(b,function(){return this}())},function(a,b){!function(b){var e,c=b,d={window:c,document:{createElement:function(){return{}},createElementNS:function(){return{}},contains:Boolean},root:{outerHTML:"x"},msie:0/0,modern:!0,avalonDiv:{},avalonFragment:null};c.location&&c.navigator&&c.window&&(e=c.document,d.document=e,d.modern=c.dispatchEvent,d.root=e.documentElement,d.avalonDiv=e.createElement("div"),d.avalonFragment=e.createDocumentFragment(),c.VBArray&&(d.msie=e.documentMode||(c.XMLHttpRequest?7:6))),a.exports=d}.call(b,function(){return this}())},function(a){function n(a){return m.lastIndex=0,'"'+(m.test(a)?String(a).replace(m,l):a)+'"'}function q(a){return d.test(c.call(a))}function t(a){var b,d;if(!a)return!1;if(b=a.length,b===b>>>0){if(d=c.call(a).slice(8,-1),f.test(d))return!1;if("Array"===d)return!0;try{return{}.propertyIsEnumerable.call(a,"length")===!1?p.test(a.item||a.callee):!0}catch(e){return!a.window}}return!1}var o,p,r,s,c=avalon.inspect,d=/^\[object (?:Window|DOMWindow|global)\]$/,e=/\[native code\]/,f=/(Array|List|Collection|Map|Arguments)\]$/,g=avalon.ohasOwn,h={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},i="000000",j=function(a,b){return(i+(b||0)).slice(-a)},k="\\u00",l=function(a){var b=a.charCodeAt(0),c=h[b];return c?c:k+j(2,b.toString(16))},m=/[\x00-\x1f\x22\x5c]/g;avalon.quote="undefined"!=typeof JSON?JSON.stringify:n,o={},"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(a){o["[object "+a+"]"]=a.toLowerCase()}),avalon.type=function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?o[c.call(a)]||"object":typeof a},p=/^\s*\bfunction\b/,avalon.isFunction="object"==typeof alert?function(a){try{return p.test(a+"")}catch(b){return!1}}:function(a){return"[object Function]"===c.call(a)},avalon.isWindow=function(a){return a?a==a.document&&a.document!=a:!1},q(avalon.window)&&(avalon.isWindow=q);for(r in avalon({}))break;s="0"!==r,avalon.isPlainObject=function(a,b){if(!a||"object"!==avalon.type(a)||a.nodeType||avalon.isWindow(a))return!1;try{if(a.constructor&&!g.call(a,"constructor")&&!g.call(a.constructor.prototype||{},"isPrototypeOf"))return!1}catch(c){return!1}if(s)for(b in a)return g.call(a,b);for(b in a);return void 0===b||g.call(a,b)},e.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(a){return"[object Object]"===c.call(a)&&Object.getPrototypeOf(a)===Object.prototype}),avalon.mix=avalon.fn.mix=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h++),"object"==typeof g||avalon.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a){try{c=g[b],d=a[b]}catch(k){continue}g!==d&&(j&&d&&(avalon.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&avalon.isPlainObject(c)?c:{},g[b]=avalon.mix(j,f,d)):void 0!==d&&(g[b]=d))}return g},avalon.each=function(a,b){var c,d;if(a)if(c=0,t(a))for(d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)break},a.exports={avalon:avalon,isArrayLike:t}},function(a){function i(a,b,c){a[c.name]=avalon.parseExpr(c)}var j,c={},d=/([a-z\d])([A-Z]+)/g,e=/[-_][^-_]/g,f=/\d\.\d{4}/,g=/[-.*+?^${}()|[\]\/\\]/g,h=[].slice;avalon.shadowCopy(avalon,{caches:{},vmodels:{},filters:{},components:{},directives:{},eventHooks:{},eventListeners:{},validators:{},scopes:{},cssHooks:c,parsers:{number:function(a){return""===a?"":/\d\.$/.test(a)?a:parseFloat(a)||0},string:function(a){return null===a||void 0===a?"":a+""},"boolean":function(a){return""===a?a:"true"===a||"1"==a}},version:"2.18",slice:function(a,b,c){return h.call(a,b,c)},css:function(a,b,d,e){var f,g;if(a instanceof avalon&&(a=a[0]),1===a.nodeType){if(f=avalon.camelize(b),b=avalon.cssName(f)||f,void 0===d||"boolean"==typeof d)return e=c[f+":get"]||c["@:get"],"background"===b&&(b="backgroundColor"),g=e(a,b),d===!0?parseFloat(g)||0:g;if(""===d)a.style[b]="";else{if(null==d||d!==d)return;isFinite(d)&&!avalon.cssNumber[f]&&(d+="px"),e=c[f+":set"]||c["@:set"],e(a,b,d)}}},directive:function(a,b){return b.parse=b.parse||i,this.directives[a]=b},isObject:function(a){return null!==a&&"object"==typeof a},range:function(a,b,c){c||(c=1),null==b&&(b=a||0,a=0);for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a,a+=c;return f},hyphen:function(a){return a.replace(d,"$1-$2").toLowerCase()},camelize:function(a){return!a||a.indexOf("-")<0&&a.indexOf("_")<0?a:a.replace(e,function(a){return a.charAt(1).toUpperCase()})},makeHashCode:function(a){return a=a||"avalon",String(Math.random()+Math.random()).replace(f,a)},escapeRegExp:function(a){return(a+"").replace(g,"\\$&")},Array:{merge:function(a,b){a.push.apply(a,b)},ensure:function(a,b){return-1===a.indexOf(b)?a.push(b):void 0},removeAt:function(a,b){return!!a.splice(b,1).length},remove:function(a,b){var c=a.indexOf(b);return~c?avalon.Array.removeAt(a,c):!1}}}),"undefined"!=typeof performance&&performance.now&&(avalon.makeHashCode=function(a){return a=a||"avalon",(a+performance.now()).replace(".","")}),j=1,a.exports={avalon:avalon,getLongID:function(a){return a.uuid||(a.uuid=avalon.makeHashCode("e"))},getShortID:function(a){return a.uuid||(a.uuid="_"+ ++j)}}},function(){function c(a){var b,d;for(b in a)avalon.ohasOwn.call(a,b)&&(d=a[b],"function"==typeof c.plugins[b]?c.plugins[b](d):"object"==typeof c[b]?avalon.shadowCopy(c[b],d):c[b]=d);return this}avalon.config=c;var d={interpolate:function(a){var e,f,g,h,b=a[0],d=a[1];if(b===d)throw new SyntaxError("openTag!==closeTag");if(e=b+"test"+d,f=avalon.avalonDiv,f.innerHTML=e,f.innerHTML!==e&&f.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");f.innerHTML="",c.openTag=b,c.closeTag=d,g=avalon.escapeRegExp(b),h=avalon.escapeRegExp(d),c.rexpr=new RegExp(g+"([\\s\\S]*)"+h),c.rexprg=new RegExp(g+"([\\s\\S]*)"+h,"g"),c.rbind=new RegExp(g+"[\\s\\S]*"+h+"|\\bms-|\\bslot\\b")}};c.plugins=d,avalon.config({interpolate:["{{","}}"],debug:!0})},function(a,b,c){function j(a){return a}var d=c(9),e=c(10),f=c(11),g=c(12),h=c(13),i=avalon.filters;avalon.__format__=function(a){var b=i[a];return b?b.get?b.get:b:j},avalon.mix(i,{uppercase:function(a){return String(a).toUpperCase()},lowercase:function(a){return String(a).toLowerCase()},truncate:function(a,b,c){return b=b||30,c="string"==typeof c?c:"...",a.length>b?a.slice(0,b-c.length)+c:String(a)},camelize:avalon.camelize,date:f,escape:avalon.escapeHtml,sanitize:e,number:d,currency:function(a,b,c){return(b||"￥")+d(a,isFinite(c)?c:2)}},g,h),a.exports=avalon},function(a){function c(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):3,g=d||",",h=c||".",i="",j=function(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}a.exports=c},function(a){var c=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,d=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,e=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,f={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};a.exports=function(a){return a.replace(c,"").replace(e,function(a){var e,c=a.toLowerCase().match(/<(\w+)\s/);return c&&(e=f[c[1]],e&&(a=a.replace(e,function(a,b,c){var d=c.charAt(0);return b+"="+d+"javascript:void(0)"+d}))),a.replace(d," ").replace(/\s+/g," ")})}},function(a){function c(a){return parseInt(a,10)||0}function d(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function e(a,b,c,e){return function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&-12===c&&(g=12),d(g,b,e)}}function f(a,b){return function(c,d){var e=c["get"+a](),f=(b?"SHORT"+a:a).toUpperCase();return d[f][e]}}function g(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=d(Math[b>0?"floor":"ceil"](b/60),2)+d(Math.abs(b%60),2)}function h(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function l(a,b){var g,h,m,n,o,p,q,r,s,d=l.locate,e="",f=[];if(b=b||"mediumDate",b=d[b]||b,"string"==typeof a&&(/^\d+$/.test(a)?a=c(a):k.test(a)?a=+RegExp.$1:(m=a.trim(),n=[0,0,0,0,0,0,0],o=new Date(0),m=m.replace(/^(\d+)\D(\d+)\D(\d+)/,function(a,b,d,e){var f=4===e.length?[e,b,d]:[b,d,e];return n[0]=c(f[0]),n[1]=c(f[1])-1,n[2]=c(f[2]),""}),p=o.setFullYear,q=o.setHours,m=m.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(a,b,d,e,f){return n[3]=c(b),n[4]=c(d),n[5]=c(e),f&&(n[6]=Math.round(1e3*parseFloat("0."+f))),""}),r=0,s=0,m=m.replace(/Z|([+-])(\d\d):?(\d\d)/,function(a,b,d,e){return p=o.setUTCFullYear,q=o.setUTCHours,b&&(r=c(b+d),s=c(b+e)),""}),n[3]-=r,n[4]-=s,p.apply(o,n.slice(0,3)),q.apply(o,n.slice(3)),a=o)),"number"==typeof a&&(a=new Date(a)),"date"===avalon.type(a)){for(;b;)h=j.exec(b),h?(f=f.concat(h.slice(1)),b=f.pop()):(f.push(b),b=null);return f.forEach(function(b){g=i[b],e+=g?g(a,d):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),e}}var i={yyyy:e("FullYear",4),yy:e("FullYear",2,0,!0),y:e("FullYear",1),MMMM:f("Month"),MMM:f("Month",!0),MM:e("Month",2,1),M:e("Month",1,1),dd:e("Date",2),d:e("Date",1),HH:e("Hours",2),H:e("Hours",1),hh:e("Hours",2,-12),h:e("Hours",1,-12),mm:e("Minutes",2),m:e("Minutes",1),ss:e("Seconds",2),s:e("Seconds",1),sss:e("Milliseconds",3),EEEE:f("Day"),EEE:f("Day",!0),a:h,Z:g},j=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,k=/^\/Date\((\d+)\)\/$/,m={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};m.SHORTMONTH=m.MONTH,l.locate=m,a.exports=l},function(a){function c(a,b,c){var e,f,i,j,d=avalon.type(a);if("array"!==d&&"object"!==d)throw"orderBy只能处理对象或数组";return e=c&&0>c?-1:1,"string"==typeof b&&(f=b,b=function(a){return a&&a[f]}),a=h(a),a.forEach(function(a){a.order=b(a.value,a.key)}),a.sort(function(a,b){var c=a.order,d=b.order;return Number.isNaN(c)&&Number.isNaN(d)?0:c===d?0:c>d?e:-e}),i="array"===d,j=i?[]:{},g(j,a,function(a){i?j.push(a.value):j[a.key]=a.value})}function d(a,b){var d,e,f,i,j,k,c=avalon.type(a);if("array"!==c&&"object"!==c)throw"filterBy只能处理对象或数组";if(d=avalon.slice(arguments,2),e=avalon.type(b),"function"===e)f=b;else{if("string"!==e&&"number"!==e)return a;if(""===b)return a;i=new RegExp(avalon.escapeRegExp(b),"i"),f=function(a){return i.test(a)}}return a=h(a).filter(function(a,b){return!!f.apply(a,[a.value,b].concat(d))}),j="array"===c,k=j?[]:{},g(k,a,function(a){j?k.push(a.value):k[a.key]=a.value})}function e(a,b,c){if(avalon.isObject(a)&&!Array.isArray(a)){var d=[];return g(d,b,function(b){d.push(a.hasOwnProperty(b)?a[b]:c?c[b]:"")})}return a}function f(a,b,c){var e,f,i,j,d=avalon.type(a);if("array"!==d&&"object"!==d)throw"limitBy只能处理对象或数组";if(b=1/0===Math.abs(Number(b))?Number(b):parseInt(b,10),Number.isNaN(b))return a;for("object"===d&&(a=h(a)),b=Math.min(a.length,b),c=!c||Number.isNaN(c)?0:~~c,0>c&&(c=Math.max(0,a.length+c)),e=[],f=c;b>f;f++)e.push(a[f]);return(i="array"===d)?e:(j={},g(j,e,function(a){j[a.key]=a.value}))}function g(a,b,c){for(var d=0,e=b.length;e>d;d++)c(b[d]);return a}function h(a){var b=[],c=0;return avalon.each(a,function(a,d){b[c++]={value:d,key:a}}),b}Number.isNaN=Number.isNaN||function(a){return a!==a},a.exports={limitBy:f,orderBy:c,selectBy:e,filterBy:d}},function(a){var c={stop:function(a){return a.stopPropagation(),a},prevent:function(a){return a.preventDefault(),a}},d={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};avalon.each(d,function(a,b){c[a]=function(a){return a.which!==b&&(a.$return=!0),a}}),a.exports=c},function(a,b,c){var d=c(15),e=c(17),f=c(18);avalon.vdomAdaptor=function(a,b){if(!a)return"toHTML"===b?"":avalon.avalonFragment.cloneNode(!1);switch(a.nodeType){case 3:return d.prototype[b].call(a);case 8:return e.prototype[b].call(a);case 1:return f.prototype[b].call(a);default:if(Array.isArray(a)){if("toHTML"===b)return a.map(function(a){return avalon.vdomAdaptor(a,"toHTML")}).join("");var c=avalon.avalonFragment.cloneNode(!1);return a.forEach(function(a){c.appendChild(avalon.vdomAdaptor(a,"toDOM"))}),c}}},a.exports={VText:d,VComment:e,VElement:f}},function(a,b,c){function f(a){if("string"==typeof a)this.type="#text",this.nodeValue=a,this.skipContent=!d.test(a),this.nodeType=3;else for(var b in a)this[b]=a[b]}var d=avalon.config.rexpr,e=c(16);f.prototype={constructor:f,toDOM:function(){var a=e(this.nodeValue);return document.createTextNode(a)},toHTML:function(){return this.nodeValue}},a.exports=f},function(a){var c=/&[a-z0-9#]{2,10};/,d=avalon.avalonDiv;a.exports=function(a){return c.test(a)?(d.innerHTML=a,d.innerText||d.textContent):a}},function(a){function c(a){if("string"==typeof a)this.type="#comment",this.nodeValue=a,this.skipContent=!0,this.nodeType=8;else for(var b in a)this[b]=a[b]}c.prototype={constructor:c,toDOM:function(){return document.createComment(this.nodeValue)},toHTML:function(){return"<!--"+this.nodeValue+"-->"+(this.template||"")}},a.exports=c},function(a){function c(a,b,c){if("object"==typeof a)for(var d in a)this[d]=a[d];else this.nodeType=1,this.type=a,this.props=b,this.children=c}function d(a){return a!==!1&&Object(a)!==a}function f(a){var b,c,d;return document.styleSheets.length<31?document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):document.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)"),b=a.split(":"),1===b.length&&b.unshift("v"),c=b[1],d=b[0],document.namespaces[d]||document.namespaces.add(d,"urn:schemas-microsoft-com:vml"),document.createElement("<"+d+":"+c+' class="rvml">')}function g(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}var e={"class":function(a,b){a.className=b},style:function(a,b){a.style.cssText=b},"for":function(a,b){a.htmlFor=b}},h=avalon.oneObject("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use,g,svg"),i=avalon.oneObject("shape,line,polyline,rect,roundrect,oval,arc,curve,background,image,shapetype,group,fill,stroke,shadow, extrusion, textbox, imagedata, textpath"),j=/^\w+\:\w+/;c.prototype={constructor:c,toDOM:function(){var a,c,k,l,m,n,o,p,q,b=this.type;if(a=avalon.modern&&h[b]?g(b):avalon.modern||!i[b]&&!j.test(b)?document.createElement(b):f(b),c=this.props["ms-important"]||this.props["ms-controller"]||this.wid,c&&(k=avalon.scopes[c],l=k&&k.vmodel&&k.vmodel.$element))return m=l.vtree[0],m.children&&(this.children=m.children),l;for(n in this.props)o=this.props[n],d(o)&&(e[n]&&avalon.msie<8?e[n](a,o):a.setAttribute(n,o+""));switch(p=this.children||[],q=p[0]?p[0].nodeValue:"",this.type){case"script":a.text=q;break;case"style":"styleSheet"in a?(a.setAttribute("type","text/css"),a.styleSheet.cssText=q):a.innerHTML=q;break;case"xmp":case"noscript":a.innerText=a.textContent=q;break;case"template":a.innerHTML=q;break;default:this.isVoidTag||this.children.forEach(function(b){b&&a.appendChild(avalon.vdomAdaptor(b,"toDOM"))})}return a},toHTML:function(){var b,c,e,a=[];for(b in this.props)c=this.props[b],d(c)&&a.push(b+"="+avalon.quote(this.props[b]+""));return a=a.length?" "+a.join(" "):"",e="<"+this.type+a,this.isVoidTag?e+"/>":(e+=">",this.children.length&&(e+=this.children.map(function(a){return a?avalon.vdomAdaptor(a,"toHTML"):""}).join("")),e+"</"+this.type+">")}},a.exports=c},function(a,b,c){c(20),c(21),c(22),c(25),c(26),c(27),c(30),c(32),a.exports=avalon},function(){function c(a,b){try{for(;b=b.parentNode;)if(b===a)return!0;return!1}catch(c){return!1}}avalon.contains=c,avalon.document.contains||(avalon.document.contains=function(a){return c(document,a)}),window.Node&&!document.createTextNode("x").contains&&(Node.prototype.contains=function(a){return!!(16&this.compareDocumentPosition(a))}),window.HTMLElement&&!avalon.root.outerHTML&&HTMLElement.prototype.__defineGetter__("outerHTML",function(){var a=document.createElement("div");return a.appendChild(this),a.innerHTML})},function(){function e(a){if(!("classList"in a)){a.classList={node:a};for(var b in d)a.classList[b.slice(1)]=d[b]}return a.classList}var c=/\S+/g,d={_toString:function(){var a=this.node,b=a.className,d="string"==typeof b?b:b.baseVal,e=d.match(c);return e?e.join(" "):""},_contains:function(a){return(" "+this+" ").indexOf(" "+a+" ")>-1},_add:function(a){this.contains(a)||this._set(this+" "+a)},_remove:function(a){this._set((" "+this+" ").replace(" "+a+" "," "))},__set:function(a){a=a.trim();var b=this.node;"object"==typeof b.className?b.setAttribute("class",a):b.className=a}};"add,remove".replace(avalon.rword,function(a){avalon.fn[a+"Class"]=function(b){var d=this[0]||{};return b&&"string"==typeof b&&1===d.nodeType&&b.replace(c,function(b){e(d)[a](b)}),this}}),avalon.fn.mix({hasClass:function(a){var b=this[0]||{};return 1===b.nodeType&&e(b).contains(a)},toggleClass:function(a,b){var d="boolean"==typeof b,e=this;return String(a).replace(c,function(a){var c=d?b:!e.hasClass(a);e[c?"addClass":"removeClass"](a)}),this}})},function(a,b,c){function h(a,b){var h,i,j,k,l,m,c=b.changeAttr;if(a&&1===a.nodeType&&c){for(h in c)if(i=c[h],"href"===h||"src"===h)a.hasAttribute||(i=String(i).replace(g,"&")),a[h]=i,window.chrome&&"EMBED"===a.tagName&&(j=a.parentNode,k=document.createComment("ms-src"),j.replaceChild(k,a),j.replaceChild(a,k));else if(0===h.indexOf("data-"))a.setAttribute(h,i);else{if(l=d[h]||h,"boolean"==typeof a[l]&&(a[l]=!!i),i===!1){a.removeAttribute(l);continue}m=f.test(a)?!1:!avalon.modern&&e(a)?!0:h in a.cloneNode(!1),m?a[l]=i+"":a.setAttribute(h,i)}b.changeAttr=null}}var d=c(23),e=c(24),f=/^\[object SVG\w*Element\]$/,g=/&amp;/g,i=/^[\],:{}\s]*$/,j=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,l=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=avalon.window.JSON?JSON.parse:function(a){if("string"==typeof a){if(a=a.trim(),a&&i.test(a.replace(k,"@").replace(l,"]").replace(j,"")))return new Function("return "+a)();avalon.error("Invalid JSON: "+a)}return a},avalon.fn.attr=function(a,b){return 2===arguments.length?(this[0].setAttribute(a,b),this):this[0].getAttribute(a)},a.exports=h},function(a){var e,c={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},d=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");d.replace(/\w+/g,function(a){c[a.toLowerCase()]=a}),e=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(","),e.replace(/\w+/g,function(a){c[a.toLowerCase()]=a}),a.exports=c},function(a){function c(a){var b=a.nodeName;return b.toLowerCase()===b&&a.scopeName&&""===a.outerText}a.exports=c},function(){function q(a,b){var c,d,e;if(a.offsetWidth<=0){if(p.test(f["@:get"](a,"display"))){c={node:a};for(d in o)c[d]=a.style[d],a.style[d]=o[d];b.push(c)}e=a.parentNode,e&&1===e.nodeType&&q(e,b)}}function r(a){return a.window||a.defaultView||a.parentWindow||!1}var i,j,k,l,m,n,o,p,c=avalon.root,d=avalon.window,e=avalon.camelize,f=avalon.cssHooks,g=["","-webkit-","-o-","-moz-","-ms-"],h={"float":d.Range?"cssFloat":"styleFloat"};avalon.cssNumber=avalon.oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(a,b,d){if(h[a])return h[a];b=b||c.style||{};for(var f=0,i=g.length;i>f;f++)if(d=e(g[f]+a),d in b)return h[a]=d;return null},avalon.fn.css=function(a,b){var c,d;if(avalon.isPlainObject(a))for(c in a)avalon.css(this,c,a[c]);else d=avalon.css(this,a,b);return void 0!==d?d:this},avalon.fn.position=function(){var a,b,c=this[0],d={top:0,left:0};return c?("fixed"===this.css("position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),"HTML"!==a[0].tagName&&(d=a.offset()),d.top+=avalon.css(a[0],"borderTopWidth",!0),d.left+=avalon.css(a[0],"borderLeftWidth",!0),d.top-=a.scrollTop(),d.left-=a.scrollLeft()),{top:b.top-d.top-avalon.css(c,"marginTop",!0),left:b.left-d.left-avalon.css(c,"marginLeft",!0)}):d},avalon.fn.offsetParent=function(){for(var a=this[0].offsetParent;a&&"static"===avalon.css(a,"position");)a=a.offsetParent;return avalon(a||c)},f["@:set"]=function(a,b,c){try{a.style[b]=c}catch(d){}},d.getComputedStyle?(f["@:get"]=function(a,b){if(!a||!a.style)throw new Error("getComputedStyle要求传入一个节点 "+a);var c,d=getComputedStyle(a,null);return d&&(c="filter"===b?d.getPropertyValue(b):d[b],""===c&&(c=a.style[b])),c},f["opacity:get"]=function(a){var b=f["@:get"](a,"opacity");return""===b?"1":b}):(i=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,j=/^(top|right|bottom|left)$/,k=/alpha\([^)]*\)/i,l=!!d.XDomainRequest,m="DXImageTransform.Microsoft.Alpha",n={thin:l?"1px":"2px",medium:l?"3px":"4px",thick:l?"5px":"6px"},f["@:get"]=function(a,b){var e,f,g,c=a.currentStyle,d=c[b];return i.test(d)&&!j.test(d)&&(e=a.style,f=e.left,g=a.runtimeStyle.left,a.runtimeStyle.left=c.left,e.left="fontSize"===b?"1em":d||0,d=e.pixelLeft+"px",e.left=f,a.runtimeStyle.left=g),"medium"===d&&(b=b.replace("Width","Style"),"none"===c[b]&&(d="0px")),""===d?"auto":n[d]||d},f["opacity:set"]=function(a,b,c){var d=a.style,e=isFinite(c)&&1>=c?"alpha(opacity="+100*c+")":"",f=d.filter||"";d.zoom=1,d.filter=(k.test(f)?f.replace(k,e):f+" "+e).trim(),d.filter||d.removeAttribute("filter")},f["opacity:get"]=function(a){var b=a.filters.alpha||a.filters[m],c=b&&b.enabled?b.opacity:100;return c/100+""}),"top,left".replace(avalon.rword,function(a){f[a+":get"]=function(b){var c=f["@:get"](b,a);return/px$/.test(c)?c:avalon(b).position()[a]+"px"}}),o={position:"absolute",visibility:"hidden",display:"block"},p=/^(none|table(?!-c[ea]).+)/,avalon.each({Width:"width",Height:"height"},function(a,b){var c="client"+a,d="scroll"+a,e="offset"+a;f[b+":get"]=function(b,c,d){var g,f=-4;return"number"==typeof d&&(f=d),c="Width"===a?["Left","Right"]:["Top","Bottom"],g=b[e],2===f?g+avalon.css(b,"margin"+c[0],!0)+avalon.css(b,"margin"+c[1],!0):(0>f&&(g=g-avalon.css(b,"border"+c[0]+"Width",!0)-avalon.css(b,"border"+c[1]+"Width",!0)),-4===f&&(g=g-avalon.css(b,"padding"+c[0],!0)-avalon.css(b,"padding"+c[1],!0)),g)},f[b+"&get"]=function(a){var d,g,e,h,c=[];for(q(a,c),d=f[b+":get"](a),e=0;g=c[e++];){a=g.node;for(h in g)"string"==typeof g[h]&&(a.style[h]=g[h])}return d},avalon.fn[b]=function(g){var i,h=this[0];return 0===arguments.length?h.setTimeout?h["inner"+a]||h.document.documentElement[c]||h.document.body[c]:9===h.nodeType?(i=h.documentElement,Math.max(h.body[d],i[d],h.body[e],i[e],i[c])):f[b+"&get"](h):this.css(b,g)},avalon.fn["inner"+a]=function(){return f[b+":get"](this[0],void 0,-2)},avalon.fn["outer"+a]=function(a){return f[b+":get"](this[0],void 0,a===!0?2:0)}}),avalon.fn.offset=function(){var c,d,e,f,g,h,i,j,a=this[0],b={left:0,top:0};return a&&a.tagName&&a.ownerDocument?(c=a.ownerDocument,d=c.body,e=c.documentElement,f=c.defaultView||c.parentWindow,avalon.contains(e,a)?(a.getBoundingClientRect&&(b=a.getBoundingClientRect()),g=e.clientTop||d.clientTop,h=e.clientLeft||d.clientLeft,i=Math.max(f.pageYOffset||0,e.scrollTop,d.scrollTop),j=Math.max(f.pageXOffset||0,e.scrollLeft,d.scrollLeft),{top:b.top+i-g,left:b.left+j-h}):b):b},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){avalon.fn[a]=function(d){var e=this[0]||{},f=r(e),g="scrollTop"===a;return arguments.length?(f?f.scrollTo(g?avalon(f).scrollLeft():d,g?d:avalon(f).scrollTop()):e[a]=d,void 0):f?b in f?f[b]:c[a]:e[a]}})},function(){function c(a){var b=a.tagName.toLowerCase();return"input"===b&&/checkbox|radio/.test(a.type)?"checked":b}var d=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,e={"option:get":avalon.msie?function(a){return d.test(a.outerHTML)?a.value:a.text.trim()}:function(a){return a.value},"select:get":function(a,b){for(var c,d=a.options,f=a.selectedIndex,g=e["option:get"],h="select-one"===a.type||0>f,i=h?null:[],j=h?f+1:d.length,k=0>f?j:h?f:0;j>k;k++)if(c=d[k],!(!c.selected&&k!==f||c.disabled||c.parentNode.disabled&&"OPTGROUP"===c.parentNode.tagName)){if(b=g(c),h)return b;i.push(b)}return i},"select:set":function(a,b,c){var d,g,f;for(b=[].concat(b),d=e["option:get"],f=0;g=a.options[f++];)(g.selected=b.indexOf(d(g))>-1)&&(c=!0);c||(a.selectedIndex=-1)}};avalon.fn.val=function(a){var d,f,g,h,b=this[0];if(b&&1===b.nodeType)if(d=0===arguments.length,f=d?":get":":set",g=e[c(b)+f])h=g(b,a);else{if(d)return(b.value||"").replace(/\r/g,"");b.value=a}return d?h:this}},function(a,b,c){var i,j,k,d=c(28),e=c(29),f=/<|&#?\w+;/,g=new d(128),h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;avalon.parseHTML=function(a){var c,d,j,i,b=avalon.avalonFragment.cloneNode(!1);if("string"!=typeof a)return b;if(!f.test(a))return document.createTextNode(a);if(a=a.replace(h,"<$1></$2>").trim(),c=g.get(a))return e(c);for(d=avalon.lexer(a),i=0;j=d[i++];)b.appendChild(avalon.vdomAdaptor(j,"toDOM"));return a.length<1024&&g.put(a,e(b)),b},avalon.innerHTML=function(a,b){if(!avalon.modern&&!rcreate.test(b)&&!rnest.test(b))try{return a.innerHTML=b,void 0}catch(c){}var d=this.parseHTML(b);this.clearHTML(a).appendChild(d)},i=/&(?:amp|lt|gt|quot|#39|#96);/g,j={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},avalon.unescapeHTML=function(a){var b=""+a;return b.replace(i,function(a){return j[a]})},k=/["'&<>]/,avalon.escapeHTML=function(a){var d,e,f,g,b=""+a,c=k.exec(b);if(!c)return b;for(e="",f=0,g=0,f=c.index;f<b.length;f++){switch(b.charCodeAt(f)){case 34:d="&quot;";break;case 38:d="&amp;";break;case 39:d="&#39;";break;case 60:d="&lt;";break;case 62:d="&gt;";break;default:continue}g!==f&&(e+=b.substring(g,f)),g=f+1,e+=d}return g!==f?e+b.substring(g,f):e},avalon.clearHTML=function(a){for(a.textContent="";a.lastChild;)a.removeChild(a.lastChild);return a}},function(a){function c(a){this.size=0,this.limit=a,this.head=this.tail=void 0,this._keymap={}}var d=c.prototype;d.put=function(a,b){var c={key:a,value:b};return this._keymap[a]=c,this.tail?(this.tail.newer=c,c.older=this.tail):this.head=c,this.tail=c,this.size===this.limit?this.shift():this.size++,b},d.shift=function(){var a=this.head;a&&(this.head=this.head.newer,this.head.older=a.newer=a.older=this._keymap[a.key]=void 0,delete this._keymap[a.key])},d.get=function(a){var b=this._keymap[a];if(void 0!==b)return b===this.tail?b.value:(b.newer&&(b===this.head&&(this.head=b.newer),b.newer.older=b.older),b.older&&(b.older.newer=b.newer),b.newer=void 0,b.older=this.tail,this.tail&&(this.tail.newer=b),this.tail=b,b.value)},a.exports=c},function(a){function d(a,b){if(1===a.nodeType){var d=a.nodeName.toLowerCase();"object"===d?a.parentNode&&(a.outerHTML=b.outerHTML):"input"===d&&c.test(b.type)?(a.defaultChecked=a.checked=b.checked,a.value!==b.value&&(a.value=b.value)):"option"===d?a.defaultSelected=a.selected=b.defaultSelected:("input"===d||"textarea"===d)&&(a.defaultValue=b.defaultValue)}}function e(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function f(a){var c,f,b=a.cloneNode(!0);return avalon.modern?b:(c=e(b),f=e(a),avalon.each(f,function(a){d(c[a],f[a])}),b)}var c=/radio|checkbox/;a.exports=f},function(a,b,c){function l(a,b,c){var e,f,g,d=a.getAttribute("avalon-events");!d||a.disabled===!0&&"click"===b||(e=[],f=k[b]||(k[b]=new RegExp("\\b"+b+"\\:([^,\\s]+)","g")),d.replace(f,function(a,b){return e.push(b),a}),e.length&&c.push({elem:a,uuids:e})),a=a.parentNode,g=avalon.gestureEvents||{},a&&a.getAttribute&&(i[b]||g[b])&&l(a,b,c)}function n(a){var b,c,d,f,g,h,e,i,j,k,n;for(a=new u(a),b=a.type,c=a.target,d=[],l(c,b,d),e=0;(h=d[e++])&&!a.cancelBubble;)for(i=a.currentTarget=h.elem,f=0;(g=h.uuids[f++])&&!a.isImmediatePropagationStopped;)if(j=avalon.eventListeners[g]){if(k=m.test(g)?h.elem._ms_context_:0,k&&k.$hashcode===!1)return avalon.unbind(c,b,j);
n=j.call(k||c,a,i._ms_local),n===!1&&(a.preventDefault(),a.stopPropagation())}}function r(a){var c,b=f.getAttribute("delegate-events")||"";-1===b.indexOf(a)&&(c=b.match(avalon.rword)||[],c.push(a),f.setAttribute("delegate-events",c.join(",")),p(f,a,n,!!o[a]))}function u(a){var b,c,e,f;if(a.originalEvent)return this;for(b in a)t.test(b)||"function"==typeof a[b]||(this[b]=a[b]);this.target||(this.target=a.srcElement),c=this.target,null==this.which&&0===a.type.indexOf("key")?this.which=null!=a.charCode?a.charCode:a.keyCode:!s.test(a.type)||"pageX"in this||(e=c.ownerDocument||d,f="BackCompat"===e.compatMode?e.body:e.documentElement,this.pageX=a.clientX+(f.scrollLeft>>0)-(f.clientLeft>>0),this.pageY=a.clientY+(f.scrollTop>>0)-(f.clientTop>>0),this.wheelDeltaY=this.wheelDelta,this.wheelDeltaX=0),this.timeStamp=new Date-0,this.originalEvent=a}var j,k,m,o,p,q,s,t,v,w,d=avalon.document,e=avalon.window,f=avalon.root,g=avalon.modern,h=c(6).getShortID,i=c(31);g||(delete i.change,delete i.select),j=avalon.eventHooks,avalon.bind=function(a,b,c){var d,e,f,g,k;return 1===a.nodeType?(d=a.getAttribute("avalon-events")||"",e=h(c),f=j[b],f&&(b=f.type||b,f.fix&&(c=f.fix(a,c),c.uuid=e)),g=b+":"+e,avalon.eventListeners[c.uuid]=c,-1===d.indexOf(b+":")&&(i[b]||avalon.modern&&o[b]?r(b):p(a,b,n)),k=d.split(","),""===k[0]&&k.shift(),-1===k.indexOf(g)&&(k.push(g),a.setAttribute("avalon-events",k.join(",")))):p(a,b,c),c},avalon.unbind=function(a,b,c){var d,e;if(1===a.nodeType)switch(d=a.getAttribute("avalon-events")||"",arguments.length){case 1:q(a,b,n),a.removeAttribute("avalon-events");break;case 2:d=d.split(",").filter(function(a){return-1===a.indexOf(b+":")}).join(","),a.setAttribute("avalon-events",d);break;default:e=b+":"+c.uuid,d=d.split(",").filter(function(a){return a!==e}).join(","),a.setAttribute("avalon-events",d),delete avalon.eventListeners[c.uuid]}else q(a,b,c)},k={},m=/^e/,o={focus:!0,blur:!0},p=g?function(a,b,c,d){a.addEventListener(b,c,d)}:function(a,b,c){a.attachEvent("on"+b,c)},q=g?function(a,b,c){a.removeEventListener(b,c)}:function(a,b,c){a.detachEvent("on"+b,c)},avalon.fireDom=function(a,b,c){if(d.createEvent){var e=d.createEvent("Events");e.initEvent(b,!0,!0,c),avalon.shadowCopy(e,c),a.dispatchEvent(e)}else f.contains(a)&&(e=d.createEventObject(),avalon.shadowCopy(e,c),a.fireEvent("on"+b,e))},s=/^(?:mouse|contextmenu|drag)|click/,t=/^[A-Z_]+$/,u.prototype={preventDefault:function(){var a=this.originalEvent;this.returnValue=!1,a&&(a.returnValue=!1,a.preventDefault&&a.preventDefault())},stopPropagation:function(){var a=this.originalEvent;this.cancelBubble=!0,a&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=!0,a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},"onmouseenter"in f||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){j[a]={type:b,fix:function(b,c){return function(d){var e=d.relatedTarget;return e&&(e===b||16&b.compareDocumentPosition(e))?void 0:(delete d.type,d.type=a,c.apply(this,arguments))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(a,b){e[a]&&!j.animationend&&(j.animationend={type:b})}),"oninput"in d.createElement("input")||(j.input={type:"propertychange",fix:function(a,b){return function(a){return"value"===a.propertyName?(a.type="input",b.apply(this,arguments)):void 0}}}),void 0===d.onmousewheel&&(v=void 0!==d.onwheel?"wheel":"DOMMouseScroll",w="wheel"===v?"deltaY":"detail",j.mousewheel={type:v,fix:function(a,b){return function(c){var d=c[w]>0?-120:120;return c.wheelDelta=~~a._ms_wheel_+d,a._ms_wheel_=c.wheelDeltaY=c.wheelDelta,c.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(c,"type",{value:"mousewheel"}),b.apply(this,arguments)}}}),avalon.fn.bind=function(a,b,c){return this[0]?avalon.bind(this[0],a,b,c):void 0},avalon.fn.unbind=function(a,b,c){return this[0]&&avalon.unbind(this[0],a,b,c),this}},function(a){a.exports={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0}},function(a,b,c){function k(){try{g.doScroll("left"),j()}catch(a){setTimeout(k)}}var e,f,g,i,h,j,l,d=c(33);if(d.htmlfy=c(34),e=avalon.document,f=avalon.window,g=avalon.root,h=[],j=function(a){for(i=!0;a=h.shift();)a(avalon)},"complete"===e.readyState)setTimeout(j);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",j);else if(e.attachEvent){e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&j()});try{l=null===f.frameElement}catch(m){}g.doScroll&&l&&f.external&&k()}f.document&&avalon.bind(f,"load",j),avalon.ready=function(a){i?a(avalon):h.push(a)},avalon.ready(function(){d(e.body)})},function(a){function d(a){var g,f,h,i,j,k,l,m,b=avalon.scan.htmlfy;for(f=0;g=a[f++];)1===g.nodeType&&(h=e(g),i=avalon.vmodels[h],i&&!i.$element?(avalon(g).removeClass("ms-controller"),i.$element=g,j=b(g),k=new Date,g.vtree=avalon.speedUp(avalon.lexer(j)),l=new Date,c&&avalon.log("构建虚拟DOM耗时",l-k,"ms"),i.$render=avalon.render(g.vtree),avalon.scopes[i.$id]={vmodel:i,local:{},isTemp:!0},m=new Date,c&&avalon.log("构建当前vm的$render方法耗时 ",m-l,"ms\n","如果此时间太长,达100ms以上\n","建议将当前ms-controller拆分成多个ms-controller,减少每个vm管辖的区域"),avalon.rerenderStart=m,c=!1,avalon.batch(h)):h||d(g.childNodes))}function e(a){return a.getAttribute("ms-controller")||a.getAttribute(":controller")}var c=!0;a.exports=avalon.scan=function(a){return a&&a.nodeType?(d([a]),void 0):(avalon.warn("[avalon.scan] first argument must be element , documentFragment, or document"),void 0)}},function(a){function d(a){switch(a.nodeType){case 1:var b=a.nodeName.toLowerCase();return"<"+b+e(a.attributes)+(c[b]?"/>":">"+f(a)+"</"+b+">");case 3:return avalon.escapeHTML(a.nodeValue);case 8:return"<!--"+a.nodeValue+"-->"}}function e(a){var d,c,e,b=[];for(c=0;d=a[c++];)d.specified&&b.push(d.name.toLowerCase()+'="'+avalon.escapeHTML(d.value)+'"');return e=b.join(" "),e?" "+e:""}function f(a){var e,c,b="";for(c=0;e=a.childNodes[c++];)b+=d(e);return b}var c=avalon.oneObject("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr");a.exports=function(a){return avalon.msie>8||!avalon.msie?a.outerHTML:d(a)}},function(a,b,c){c(36),c(38),c(40),c(41),c(42),c(43),c(44),c(45),c(46),c(47),c(48),c(57),c(58),c(59),c(60),c(61),c(64)},function(a,b,c){var d=c(37);avalon.directive("important",{priority:1,parse:function(a,b,c){var d=avalon.quote(c.expr);a[c.name]=d,a.local="{}",a.vmodel="(function(){ return __vmodel__ = avalon.vmodels["+d+"]})()",b.$prepend=["(function(__vmodel__){","var important = avalon.scopes["+d+"]",'if(important){avalon.log("不进入"+'+d+");return }"].join("\n")+"\n",b.$append="\n})();"},diff:function(a,b,c){(a===b||b.vmodel!==a.vmodel)&&(b["ms-controller"]=a[c],b.local=a.local,b.vmodel=a.vmodel,d(b,this.update))},update:function(a,b,c){avalon.directives.controller.update(a,b,c,"important")}})},function(a){a.exports=function(a,b,c){if(c)a.afterChange=a.afterChange||[],avalon.Array.ensure(a.afterChange,b);else{var d=a.dom;b(a.dom,a,d&&d.parentNode)}}},function(a,b,c){var d=c(37),e=c(39),f={};avalon.mediatorFactoryCache=function(a,b){var g,c=a.$hashcode,d=b.$hashcode,e=c+d;return f[e]?f[e]:(g=avalon.mediatorFactory(a,b),f[e]=g)},avalon.directive("controller",{priority:2,parse:function(a,b,c){var d=avalon.quote(c.expr);a[c.name]=d,a.local="__local__",a.vmodel=["(function(){","var vm = avalon.vmodels["+d+"]","if(vm && __vmodel__&& vm !== __vmodel__){","return __vmodel__ = avalon.mediatorFactoryCache(__vmodel__, vm)","}else if(vm){","return __vmodel__ = vm","}","})()"].join("\n"),b.$prepend="(function(__vmodel__){",b.$append="\n})(__vmodel__);"},diff:function(a,b,c){(a===b||b[c]!==a[c])&&(b[c]=a[c],b.local=a.local,b.vmodel=a.vmodel,d(b,this.update))},update:function(a,b,c,f){var k,l,m,g=b.vmodel,h=b.local,i=b["ms-controller"],j=avalon.scopes[i];j||(delete b.vmodel,delete b.local,k=avalon.vmodels[i],l=g.$element&&g.$element.vtree[0]===b?g.$render:avalon.render([b],h),g.$render=l,g.$element=a,e([a],b,c),a.vtree=[b],k!==g&&(k.$render=k.$render||l,k.$element=k.$element||a),m=f?g:k,j=avalon.scopes[i]={vmodel:g,local:h},d(b,function(){var a=m.$events["onReady"];a&&(m.$fire("onReady"),delete m.$events.onReady),j.isMount=!0},"afterChange"))}})},function(a){function f(a,b,c){var d,i,l,j,k,m,n,o,p,q,r,s,t,u;if(b=h(b),d={},i=b.length,0!==i){for(b.forEach(function(a,b){d[b]=g(a)}),j=[],k=!1,m=0,n=0;;){if(l=a[m++],n++>5e3)break;if(o=l&&g(l),p=j.length,d[p]===o?(j.push(l),q=b[p],q.dynamic&&(q.dom=l),1!==l.nodeType||q.isVoidTag||e[q.type]||("select-one"===l.type&&(r=l.selectedIndex),f(l.childNodes,q.children,l),"select-one"===l.type&&(l.selectedIndex=r))):(k=!0,"8true"===d[p]&&(s=b[p],t=document.createComment(s.nodeValue),s.dom=t,j.push(t),m=Math.max(0,--m))),j.length===i)break}if(k){for(u=document.createDocumentFragment(),m=0;l=j[m++];)u.appendChild(l);for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(u)}}}function g(a){switch(a.nodeType){case 3:return"3"+d.test(a.nodeValue);case 1:return"1"+(a.nodeName||a.type).toLowerCase();case 8:return"8"+c.test(a.nodeValue)}}function h(a){var d,c,b=[];for(c=0;d=a[c];c++)Array.isArray(d)?b=b.concat(h(d)):b.push(d);return b}var c=/^ms\-for/,d=/[\S\xA0]/,e=avalon.oneObject("script,style,xmp,template,noscript,textarea");a.exports=f},function(a,b,c){var d=c(22),e=c(37);avalon.directive("attr",{diff:function(a,b,c){var g,h,i,d=a[c],f=b[c];if(d&&"object"==typeof d){if(d=d.$model||d,Array.isArray(d)&&(d=avalon.mix.apply({},d)),a===b||"object"!=typeof f)b.changeAttr=b[c]=d;else{g={},h=!1;for(i in d)d[i]!==f[i]&&(h=!0,g[i]=d[i]);h&&(b[c]=d,b.changeAttr=g)}b.changeAttr&&e(b,this.update)}a!==b&&delete a[c]},update:d})},function(a,b,c){var d=c(37);avalon.directive("css",{diff:function(a,b,c){var g,h,i,e=a[c],f=b[c];if(Object(e)===e){if(e=e.$model||e,Array.isArray(e)&&(e=avalon.mix.apply({},e)),a===b||"object"!=typeof f)b.changeStyle=b[c]=e;else{g={},h=!1;for(i in e)e[i]!==f[i]&&(h=!0,g[i]=e[i]);h&&(b[c]=e,b.changeStyle=g)}b.changeStyle&&d(b,this.update)}delete a[c]},update:function(a,b){var e,c=b.changeStyle,d=avalon(a);for(e in c)d.css(e,c[e]);delete b.changeStyle}})},function(a,b,c){function f(a,b){var h,c=a.ownerDocument,d=a.nodeName,g="_"+d;return f[g]||(h=c.body.appendChild(c.createElement(d)),b=avalon.modern?getComputedStyle(h,null).display:h.currentStyle.display,c.body.removeChild(h),b===e&&(b="block"),f[g]=b),f[g]}var d=c(37),e="none";avalon.parseDisplay=f,avalon.directive("visible",{diff:function(a,b,c){var e=!!a[c];(a===b||e!==b[c])&&(b[c]=e,d(b,this.update))},update:function(a,b){function h(){void 0!==g&&(a.style.display=g)}var c,d,g;a&&1===a.nodeType&&(c=b["ms-visible"],d=a.style.display,c?(d===e&&(g=b.displayValue,g||(a.style.display="")),""===a.style.display&&avalon(a).css("display")===e&&avalon.contains(a.ownerDocument,a)&&(g=f(a))):d!==e&&(g=e,b.displayValue=d),avalon.applyEffect(a,b,{hook:c?"onEnterDone":"onLeaveDone",cb:h}))}})},function(a,b,c){var d=c(37);avalon.directive("expr",{parse:avalon.noop,diff:function(a,b){var c=a.nodeValue+"";(a===b||c!==b.nodeValue)&&(b.nodeValue=c,d(b,this.update))},update:function(a,b){a?a.nodeValue=b.nodeValue:avalon.warn("[",b.nodeValue,"]找不到对应的文本节点赋值")}})},function(a,b,c){var d=c(37);avalon.directive("text",{parse:function(a,b,c){a[c.name]=1,b.children=[],a.children='[{\nnodeType:3,\ntype:"#text",\ndynamic:true,\nnodeValue:avalon.parsers.string('+avalon.parseExpr(c)+")}]"},diff:function(a,b){b.children.length||d(b,this.update)},update:function(a,b){var c,d;if(a&&!b.isVoidTag){for(c=a;c.firstChild;)c.removeChild(c.firstChild);a=document.createTextNode("x"),c.appendChild(a),d={nodeType:3,type:"#text",dom:a},b.children.push(d)}}})},function(a,b,c){var d=c(37),e=c(39);avalon.directive("html",{parse:function(a,b,c){b.isVoidTag?a.children="[]":(a[c.name]=avalon.parseExpr(c),a.vmodel="__vmodel__",a.local="__local__")},diff:function(a,b,c){var f,g,h,e=a[c]+"";a!==b&&b.render&&e===b[c]?(h=b.render(a.vmodel,a.local),a.children=h):(b[c]=e,f=avalon.speedUp(avalon.lexer(e)),b.children=f,g=avalon.render(f,a.local),b.render=g,h=g(a.vmodel,a.local),a.children=h,d(b,this.update))},update:function(a,b){avalon.clearHTML(a);var d=avalon.vdomAdaptor(b.children);e(d.childNodes,b.children,d),a.appendChild(d)}})},function(a,b,c){function f(){var b,c,d,e,a=[];for(b=0;b<arguments.length;b++)if(c=arguments[b],d=typeof c,"string"===d||"number"===d||c===!0)a.push(c);else if(Array.isArray(c))a.push(f.apply(null,c));else if("object"===d)for(e in c)c.hasOwnProperty(e)&&c[e]&&a.push(e);return a.join(" ")}function i(a){var b=a.target;avalon(b).addClass(b.getAttribute(h[a.type])||"")}function j(a){var b=a.target,c=h[a.type];avalon(b).removeClass(b.getAttribute(c)||""),"change-active"!==c&&avalon(b).removeClass(b.getAttribute("change-active")||"")}function k(a,b){var c=a.getAttribute("old-change-class"),d=b["ms-class"];c!==d&&(avalon(a).removeClass(c).addClass(d),a.setAttribute("old-change-class",d))}var h,d=c(6).getLongID,e=c(37),g=avalon.directives;avalon.directive("class",{diff:function(a,b,c){var l,m,n,d=c.slice(3),g=a[c],h=b[c]||"",k=b.classEvent||{};"hover"===d?(k.mouseenter=i,k.mouseleave=j):"active"===d&&(b.props.tabindex=a.props.tabindex||-1,k.tabIndex=b.props.tabindex,k.mousedown=i,k.mouseup=j,k.mouseleave=j),b.classEvent=k,l=f(g),m={},n=[],l.replace(/\S+/g,function(a){m[a]||(m[a]=1,n.push(a))}),l=n.join(" "),(a===b||h!==l)&&(b[c]=l,b["change-"+d]=l,e(b,this.update,d))},update:function(a,b){var c,d,e;if(a&&1===a.nodeType){if(c=b.classEvent){for(d in c)"tabIndex"===d?a[d]=c[d]:avalon.bind(a,d,c[d]);b.classEvent={}}e=["class","hover","active"],e.forEach(function(c){var f,d="change-"+c,e=b[d];void 0!==e&&("class"===c?a&&k(a,b):(f=a.getAttribute("change-"+c),f&&avalon(a).removeClass(f),a.setAttribute(d,e)))})}}}),g.active=g.hover=g["class"],h={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"},d(i),d(j)},function(a,b,c){function k(a,b){for(var c in a)if(a[c]!==b[c])return!0;return!1}var f,d=c(28);new d(128),f=c(37),c(6).getLongID,avalon.directive("on",{priority:3e3,parse:function(a,b,c){var d=c.name.replace("ms-on-","e").replace("-","_"),e=d+"_"+c.expr.replace(/\s/g,"").replace(/[^$a-z]/gi,function(a){return a.charCodeAt(0)}),f=avalon.quote(e),g="(function(){\nvar fn610 = "+avalon.parseExpr(c,"on")+"\nfn610.uuid ="+f+";\nreturn fn610})()";a.vmodel="__vmodel__",a.local="__local__",a[c.name]=g},diff:function(a,b,c){var d=a[c],e=d.uuid,g=e.split("_").shift(),h=g.slice(1)+":"+e,i=b[c],j=!1,l=a===b;(l||!i||i.uuid!==e)&&(b[c]=d,b.addEvents=b.addEvents||{},b.addEvents[h]=d,avalon.eventListeners.uuid=d,j=!0),k(b.local||{},a.local)&&(j=!0),j&&(b.local=a.local,b.vmodel=a.vmodel,f(b,this.update))},update:function(a,b){if(a&&!(a.nodeType>1)){var c,d,e;a._ms_context_=b.vmodel,a._ms_local=b.local;for(c in b.addEvents)d=c.split(":").shift(),e=b.addEvents[c],avalon.bind(a,d,e);delete b.addEvents}}})},function(a,b,c){function o(a){var c,b,d;for(b=0;c=this.parser[b++];)d=avalon.parsers[c],d&&(a=d.call(this,a));return a}var d=c(37),e=c(49),f=c(50),g=/\|\s*change\b/,h=/^(?:checkbox|radio)$/,i=/\|\s*debounce(?:\(([^)]+)\))?/,j=c(51),k=c(54),l=c(52),m=c(55),n=c(56);avalon.directive("duplex",{priority:2e3,parse:function(a,b,c){var l,n,o,p,q,r,s,d=c.expr,j=b.props.type,k=c.param,m=!1;k=k?k.split("-").map(function(a){return"checked"===a&&(m=!0),a}):[],h.test(j)&&m&&(k=[],l="radio"),/input|textarea|select/.test(b.type)?l||(l="select"===b.type?"select":"checkbox"===j?"checkbox":"radio"===j?"radio":"input"):"contenteditable"in b.props&&(l="contenteditable"),n=!1,o=0,("input"===l||"contenteditable"===l)&&(p=!0,g.test(d)&&(n=!0),n||(q=d.match(i),q&&(o=parseInt(q[1],10)||300))),r=a.props["data-duplex-changed"],a.parser=avalon.quote(k+""),a.modelValue="("+avalon.parseExpr(c,"duplex")+")(__vmodel__)",s=e.get("duplex:format:"+d),a.duplexData=f({type:l,vmodel:"__vmodel__",local:"__local__",isChecked:m,isString:!!p,isChanged:n,debounceTime:o,format:s||"function(vm, a){return a}",set:e.get("duplex:set:"+d),callback:r?avalon.parseExpr(r,"on"):"avalon.noop"})},diff:function(a,b){var c,e,f,g;if(a!==b&&b.duplexData){if(c=b.duplexData,e=a.modelValue,f=c.modelValue,a.duplexData=0,!Array.isArray(e)&&e===f)return}else c=b.duplexData=a.duplexData,c.parser=a.parser?a.parser.split(","):[],c.parse=o,e=a.modelValue;if(c.isString){if(g=c.parse(e),g!==e)return c.set(c.vmodel,g),void 0;e=g}if(c.modelValue=e,c.isString){if(g=c.format(c.vmodel,e+""),g!==e+"")return c.set(c.vmodel,g),void 0;e=g}c.viewValue=e,d(b,this.update,"afterChange")},update:function(a,b){var c,d;a&&1===a.nodeType&&(a.__ms_duplex__||(a.__ms_duplex__=b.duplexData,j(a,b)),c=a.__ms_duplex__,c.dom=a,n(a,b),!c.isString||avalon.msie||k!==!1||a.valueHijack||(a.valueHijack=l,d=setInterval(function(){avalon.contains(avalon.root,a)?a.valueHijack():clearInterval(d)},30)),m[c.type].call(c))}})},function(a,b,c){var d=c(28);a.exports=new d(512)},function(a){function g(a){return e.test(a)||c[a]?f(a):a}function h(a){var c,e,h,i,j,b=[];for(c in a)if("props"===c){e=[];for(h in a.props)i=a.props[h],"string"==typeof i&&(i=f(i)),e.push(g(h)+": "+i);b.push("props: {"+e.join(",\n")+"}")}else a.hasOwnProperty(c)&&"dom"!==c&&(j=a[c],"string"==typeof j&&(j=d[c]?f(j):j),b.push(g(c)+":"+j));return"{\n"+b.join(",\n")+"}"}var d,e,f,c=avalon.oneObject("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile");avalon.keyMap=c,d={type:1,template:1,order:1,nodeValue:1,dynamic:1,signature:1,wid:1,cid:1},e=/[W-]/,f=avalon.quote,a.exports=h},function(a,b,c){function i(a,b){var h,c={},e=b.duplexData;switch(e.update=d,e.type){case"radio":case"checkbox":c.click=d;break;case"select":c.change=d;break;case"contenteditable":e.isChanged?c.blur=d:avalon.modern?(g.webkitURL?c.webkitEditableContentChanged=d:g.MutationEvent&&(c.DOMCharacterDataModified=d),c.input=d):(c.keydown=p,c.paste=k,c.cut=k,c.focus=o,c.blur=n);break;case"input":e.isChanged?c.change=d:(f&&(c.keyup=p),9>f?(c.propertychange=j,c.paste=k,c.cut=k):c.input=d,(!f||f>9)&&(c.compositionstart=n,c.compositionend=o),f||/\[native code\]/.test(g.Int8Array)||(c.keydown=p,c.paste=k,c.cut=k,g.netscape&&(c.DOMAutoComplete=d)))}/password|text/.test(b.props.type)&&(c.focus=l,c.blur=m,e.getCaret=s,e.setCaret=r);for(h in c)avalon.bind(a,h,c[h])}function j(a){"value"===a.propertyName&&d.call(this,a)}function k(a){var b=this;setTimeout(function(){d.call(b,a)},0)}function l(){this.caret=!0}function m(){this.caret=!1}function n(){this.composing=!0}function o(a){this.composing=!1,k.call(this,a)}function p(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||d.call(this,a)}var q,r,s,d=c(52),e=c(6).getShortID,f=avalon.msie,g=avalon.window,h=avalon.document;e(l),e(m),e(n),e(o),e(d),e(j),e(k),e(p),q=function(a){setTimeout(a,0)},r=function(a,b){var c;a.createTextRange?q(function(){a.focus(),c=a.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}):(a.focus(),void 0!==a.selectionStart&&a.setSelectionRange(b,b))},s=function(a){var c,d,e,f,g,b=0;return"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?b=a.selectionStart:(d=h.selection.createRange(),d&&d.parentElement()==a&&(f=a.value.length,c=a.value.replace(/\r\n/g,"\n"),e=a.createTextRange(),e.moveToBookmark(d.getBookmark()),g=a.createTextRange(),g.collapse(!1),e.compareEndPoints("StartToEnd",g)>-1?b=f:(b=-e.moveStart("character",-f),b+=c.slice(0,b).split("\n").length-1))),b},a.exports=i},function(a,b,c){function e(a){var e,f,g,b=this,c=this.__ms_duplex__;if(!b.composing&&c.parse(b.value)!==c.lastViewValue){if(b.caret)try{e=c.getCaret(b),c.pos=e}catch(a){avalon.warn("fixCaret error",a)}c.debounceTime>4?(f=new Date,g=f-c.time||0,c.time=f,g>=c.debounceTime?d[c.type].call(c):(clearTimeout(c.debounceID),c.debounceID=setTimeout(function(){d[c.type].call(c)},g))):d[c.type].call(c)}}var d=c(53);a.exports=e},function(a){function d(a){a.callback&&a.callback.call(a.vmodel,{type:"changed",target:a.dom})}var c={input:function(a){var c,e,f,g,h,b=this;a=a||"value",c=b.dom,e=c[a],f=b.parse(e),g=b.format(b.vmodel,f),b.lastViewValue=g,f!==b.modelValue&&(b.set(b.vmodel,f),d(b)),c[a]=g,h=b.pos,c.caret&&b.setCaret(c,h)},radio:function(){var b,a=this;a.isChecked?(b=!a.modelValue,a.set(a.vmodel,b),d(a)):(c.input.call(a),a.lastViewValue=0/0)},checkbox:function(){var c,e,a=this,b=a.modelValue;Array.isArray(b)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),b=[b]),c=a.dom.checked?"ensure":"remove",b[c]&&(e=a.parse(a.dom.value),b[c](e),d(a))},select:function(){var a=this,b=avalon(a.dom).val();b+""!=this.modelValue+""&&(b=Array.isArray(b)?b.map(function(b){return a.parse(b)}):a.parse(b),a.set(a.vmodel,b),d(a))},contenteditable:function(){c.input.call(this,"innerHTML")}};a.exports=c},function(a){function g(a){d[this.tagName].call(this,a),!this.caret&&this.__ms_duplex__&&this.__ms_duplex__.update.call(this)}var d,e,f,h,c=!1;try{d={},e=HTMLInputElement.prototype,f=HTMLTextAreaElement.prototype,h=HTMLInputElement.prototype,Object.getOwnPropertyNames(h),d["INPUT"]=Object.getOwnPropertyDescriptor(e,"value").set,Object.defineProperty(e,"value",{set:g}),d["TEXTAREA"]=Object.getOwnPropertyDescriptor(f,"value").set,Object.defineProperty(f,"value",{set:g}),c=!0}catch(i){}a.exports=c},function(a){var c={input:function(){this.dom.value=this.viewValue},radio:function(){var a,b;a=this.isChecked?!!this.modelValue:this.viewValue+""===this.dom.value,b=this.dom,6===avalon.msie?setTimeout(function(){b.defaultChecked=a,b.checked=a},31):b.checked=a},checkbox:function(){var d,e,a=!1,b=this.dom,c=b.value;for(d=0;d<this.modelValue.length;d++)e=this.modelValue[d],e+""===c&&(a=!0);b.checked=a},select:function(){var a=Array.isArray(this.viewValue)?this.viewValue.map(String):this.viewValue+"";avalon(this.dom).val(a)},contenteditable:function(){this.dom.innerHTML=this.viewValue,this.update.call(this.dom)}};a.exports=c},function(a){a.exports=function(a,b){var e,c=a.__ms_duplex__,d=b["ms-rules"];if(d&&!c.validator)for(;a&&1===a.nodeType;){if(e=a._ms_validator_){c.rules=d,c.validator=e,avalon.Array.ensure(e.fields,c)&&e.addField(c);break}a=a.parentNode}}},function(a,b,c){function g(){var a=this.data||{};return this.message.replace(f,function(b,c){return null==a[c]?"":a[c]})}var d=c(37),e=avalon.directive("validate",{diff:function(a,b,c){var f=a[c],g=b[c];if(!(g&&g.onError&&g.addField)&&Object(f)===f){b.vmValidator=f,f.$id&&(f=f.$model),b[c]=f;for(c in e.defaults)f.hasOwnProperty(c)||(f[c]=e.defaults[c]);f.fields=f.fields||[],d(b,this.update)}},update:function(a,b){function g(){e.validateAll.call(c,c.onValidateAll)}var d,c=b["ms-validate"];a._ms_validator_=c,c.dom=a,d=b.vmValidator;try{d.onManual=g}catch(f){}delete b.vmValidator,a.setAttribute("novalidate","novalidate"),c.validateAllInSubmit&&avalon.bind(a,"submit",function(a){a.preventDefault(),g()}),"function"==typeof c.onInit&&c.onInit.call(a,{type:"init",target:a,validator:c})},validateAll:function(a){var b=this,c="function"==typeof a?a:b.onValidateAll,d=b.fields.filter(function(a){var c=a.dom;return c&&!c.disabled&&b.dom.contains(c)}).map(function(a){return e.validate(a,!0)}),f=[];Promise.all(d).then(function(a){var e,d,g;for(d=0;e=a[d++];)f=f.concat(e);b.deduplicateInValidateAll&&(g={},f=f.filter(function(a){var b=a.dom,c=b.uniqueID||(b.uniqueID=setTimeout("1"));return g[c]?!1:(g[c]=!0,!0)})),c.call(b.dom,f)})},addField:function(a){var b=this,c=a.dom;!b.validateInKeyup||a.isChanged||a.debounceTime||avalon.bind(c,"keyup",function(b){e.validate(a,0,b)}),b.validateInBlur&&avalon.bind(c,"blur",function(b){e.validate(a,0,b)}),b.resetInFocus&&avalon.bind(c,"focus",function(d){b.onReset.call(c,d,a)})},validate:function(a,b,c){var i,j,k,l,m,n,o,p,d=[],e=a.modelValue,f=a.dom,h=a.validator;if(!f.disabled){for(i in a.rules)j=a.rules[i],j!==!1&&(k=avalon.validators[i],d.push(new Promise(function(a,b){l=a,m=b})),n=function(b){if(a.norequired&&""===e&&(b=!0),b)l(!0);else{var c={element:f,data:a.data,message:f.getAttribute("data-"+i+"-message")||f.getAttribute("data-message")||k.message,validateRule:i,getMessage:g};l(c)}},a.data={},a.data[i]=j,k.get(e,a,n));return o=[],p=Promise.all(d).then(function(a){for(var e,d=0;e=a[d++];)"object"==typeof e&&o.push(e);return b||(o.length?h.onError.call(f,o,c):h.onSuccess.call(f,o,c),h.onComplete.call(f,o,c)),o})}}}),f=/\\?{{([^{}]+)\}}/gm;e.defaults={addField:e.addField,onError:avalon.noop,onSuccess:avalon.noop,onComplete:avalon.noop,onManual:avalon.noop,onReset:avalon.noop,onValidateAll:avalon.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1}},function(){function c(a){return"regexp"===avalon.type(a)}function f(a){var b,c,d,e,f;return"string"==typeof a&&a&&(b=a.split("-"),3===b.length&&4===b[0].length)?(c=~~b[0],d=~~b[1]-1,e=~~b[2],f=new Date(c,d,e),f.getFullYear()===c&&f.getMonth()===d&&f.getDate()===e):!1}var d,e;avalon.directive("rules",{parse:function(a,b,c){var d=c.expr;/{.+}/.test(d)&&(a[c.name]=avalon.parseExpr(c))},diff:function(a,b,c){b[c]=a[c];var d=b.dom&&b.dom.__ms_duplex__;d&&(d.rules=a[c])}}),d=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,e=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,avalon.shadowCopy(avalon.validators,{pattern:{message:"必须匹配{{pattern}}这样的格式",get:function(a,b,d){var g,e=b.element,f=b.data;return c(f.pattern)||(g=e.getAttribute("pattern"),f.pattern=new RegExp("^(?:"+g+")$")),d(f.pattern.test(a)),a}},digits:{message:"必须整数",get:function(a,b,c){return c(/^\-?\d+$/.test(a)),a}},number:{message:"必须数字",get:function(a,b,c){return c(isFinite(a)),a}},required:{message:"必须填写",get:function(a,b,c){return c(""!==a),a}},equalto:{message:"密码输入不一致",get:function(a,b,c){var d=String(b.data.equalto),e=avalon(document.getElementById(d)).val()||"";return c(a===e),a}},date:{message:"日期格式不正确",get:function(a,b,c){var d=b.data;return"regexp"===avalon.type(d.date)?c(d.date.test(a)):c(f(a)),a}},url:{message:"URL格式不正确",get:function(a,b,c){return c(e.test(a)),a}},email:{message:"email格式不正确",get:function(a,b,c){return c(d.test(a)),a}},minlength:{message:"最少输入{{minlength}}个字",get:function(a,b,c){var d=parseInt(b.data.minlength,10);return c(a.length>=d),a}},maxlength:{message:"最多输入{{maxlength}}个字",get:function(a,b,c){var d=parseInt(b.data.maxlength,10);return c(a.length<=d),a}},min:{message:"输入值不能小于{{min}}",get:function(a,b,c){var d=parseInt(b.data.min,10);return c(parseFloat(a)>=d),a}},max:{message:"输入值不能大于{{max}}",get:function(a,b,c){var d=parseInt(b.data.max,10);return c(parseFloat(a)<=d),a}},chs:{message:"必须是中文字符",get:function(a,b,c){return c(/^[\u4e00-\u9fa5]+$/.test(a)),a}}})},function(a,b,c){var d=c(37);avalon.directive("if",{priority:6,diff:function(a,b,c){var e=!!a[c];if(e||(a.nodeType=8,a.order=""),a===b||e!==b[c]){if(b[c]=e,e&&1===b.nodeType)return;d(b,this.update)}},update:function(a,b,c){var e,d=b["ms-if"];d?(b.nodeType=1,b.nodeValue=null,e=b.comment,c=e.parentNode,c.replaceChild(a,e),avalon.applyEffect(a,b,{hook:"onEnterDone"})):avalon.applyEffect(a,b,{hook:"onLeaveDone",cb:function(){var d=document.createComment("ms-if");b.nodeValue="ms-if",c.replaceChild(d,a),b.nodeType=8,b.comment=d}})}})},function(a,b,c){function n(a){var b=typeof a;return a&&"object"===b?a.$hashcode:b+":"+a}function p(a,b,c,d,e,f,g,h){var k,i=h?n(b):a,j={};j[e]=a,j[f]=b;for(k in c)k in j||(j[k]=c[k]);d(a,b,i,j,g)}function r(a,b){var f,e,c=[],d=[];for(e=0;f=a[e++];)8===f.nodeType&&f.nodeValue===b?(d.push(f),c.push(d),d=[]):d.push(f);return c}function s(a,b){var h,g,c=b.signature,d=[],e=[],f={children:[]};for(g=0;h=a[g];g++)8===h.nodeType&&h.nodeValue===c?(f.children.push(h),f.key=h.key,e.push(h.key),f.index=d.length,d.push(f),f={children:[]}):f.children.push(h);return b.compareText=e.length+"|"+e.join(";;"),d}function t(a){for(var b=0,c=[];a&&(8===a.nodeType&&(0===a.nodeValue.indexOf("ms-for:")?++b:0===a.nodeValue.indexOf("ms-for-end:")&&--b),c.push(a),a=a.nextSibling,0!==b););return c}function w(a,b){var d,e,f,c=b.match(u);if(c){d=c[1];for(e in a)if(f=e.match(v),f&&f[1]===d)return x(a,e)}}function x(a,b){var d,e,c=a[b];return c?(d=c.arr)?(e=d.pop(),d.length||(c.arr=0),e):(delete a[b],c):void 0}function y(a,b){var d,e,c=b.key;a[c]?(d=a[c],e=d.arr||(d.arr=[]),e.push(b)):a[c]=b}var o,u,v,z,d=c(37),e=/ms-for\:\s*/,f=/^\s*\(\s*/,g=/\s*\)\s*$/,h=/\s*,\s*/,i=/\s+as\s+([$\w]+)/,j=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,k=/^(null|undefined|NaN|window|this|\$index|\$id)$/,l=c(39);c(50),o=/^\s*function\s*\(([^\)]+)\)/,avalon._each=function(a,b,c,d){var f,g,h,i,e=[];if(d.push(e),f=(b+"").match(o),g=f[1],h=g.match(avalon.rword),Array.isArray(a))for(i=0;i<a.length;i++)p(i,a[i],c,b,h[0],h[1],e,!0);else for(i in a)a.hasOwnProperty(i)&&p(i,a[i],c,b,h[0],h[1],e)},avalon.directive("for",{priority:3,parse:function(a,b){var l,m,n,o,p,d=b.nodeValue;d=d.replace(i,function(a,b){return!j.test(b)||k.test(b)?avalon.error("alias "+b+" is invalid --- must be a valid JS identifier which is not a reserved name."):l=b,""}),m=d.replace(e,"").split(" in "),n="var loop = "+avalon.parseExpr(m[1])+" \n",o=l?"var "+l+" = loop\n":"",p=m[0].replace(f,"").replace(g,"").split(h),1===p.length&&p.unshift("$key"),p.push("traceKey"),p.push("__local__"),p.push("vnodes"),b.$append=n+o+"avalon._each(loop,function("+p.join(", ")+"){\n"+(l?"__local__["+avalon.quote(l)+"]=loop\n":"")},diff:function(a,b,c,e,f){var j,k,l,m,n,o,p,q,r,t,g=e[f+1],h=c[f+1],i=e[f+2];if(b.preRepeat=g,j=b.cache,!(j&&b===a||(k=s(h,a),j&&b.compareText===a.compareText))){if(b.compareText=a.compareText,o=[],g.length){if(!j){for(j={},b.coms=k,l=0;l<k.length;l++)y(j,k[l]);return b.cache=j,void 0}for(p={},q=[],l=0;m=k[l++];)n=x(j,m.key),n?(n.action="move",n.oldIndex=n.index,n.index=m.index,y(p,n)):q.push(m);for(b.coms||(b.coms=s(g,b)),l=0;m=q[l++];)n=w(j,m.key),n?(n.action="move",n.oldIndex=n.index,n.index=m.index):(n=m,n.action="enter",b.coms.push(n)),y(p,n);b.coms.sort(function(a,b){return a.index-b.index}),b.cache=p;for(l in j)n=j[l],n.action="leave",o.push(n),n.arr&&(n.arr.forEach(function(a){a.action="leave",o.push(a)}),delete n.arr)}else{for(j={},b.coms=k,e[f+1]=h,l=0;m=k[l];l++)m.action="enter",y(j,m);b.cache=j}return b.removes=o,r=avalon.caches[b.cid],t=a.vmodel,i&&r&&(i.afterChange=[function(a){r.call(t,{type:"rendered",target:a,signature:b.signature})}]),d(b,this.update),!0}},update:function(a,b,c){var g,i,h,j,k,m,n,o,p,q,s,u,v,x,w,d=b.signature,e=t(a),f=e.slice(1,-1);for(e.pop(),g=r(f,d),h=0;i=b.removes[h++];)j=g[i.index],j&&(j.forEach(function(a,b){a.parentNode&&avalon.applyEffect(a,i.children[b],{hook:"onLeaveDone",cb:function(){a.parentNode.removeChild(a)},staggerKey:d+"leave"})}),i.children.length=0);for(b.removes=[],k=a,m=avalon.avalonFragment,o=[],h=0;h<b.coms.length;h++)if(p=b.coms[h],q=p.children,"leave"!==p.action){if(o.push(p),"enter"===p.action)n||(n=avalon.vdomAdaptor(q,"toDOM")),s=n.cloneNode(!0),u=avalon.slice(s.childNodes),l(u,q,c),c.insertBefore(s,k.nextSibling),z(u,q,{hook:"onEnterDone",staggerKey:d+"enter"});else if("move"===p.action&&(u=g[p.oldIndex]||[],p.index!==p.oldIndex)){for(v=m.cloneNode(!1),w=0;x=u[w++];)v.appendChild(x);c.insertBefore(v,k.nextSibling),z(u,q,{hook:"onMoveDone",staggerKey:d+"move"})}if(k=u[u.length-1],!k)break}b.preRepeat.length=0,b.coms.length=0,o.forEach(function(a){b.coms.push(a),e.push.apply(b.preRepeat,a.children)})}}),u=/^(string|number|boolean)/,v=/^_*(string|number|boolean)/,z=function(a,b,c){b.forEach(function(d,e){avalon.applyEffect(a[e],b[e],c)
})}},function(a,b,c){function g(a,b){var c=b.props.is,d=b["component-vm:"+c],e="component-html:"+c,f=b[e],g=avalon.vdomAdaptor(b,"toHTML");f!==g&&(b[e]=g,d.$fire("onViewChange",{type:"viewchange",target:a,vmodel:d,is:c}))}function h(a){var b=!0;try{i(a)}catch(c){b=!1}return b}function i(a){a.children.forEach(function(a){if(8===a.nodeType){if("unresolved component placeholder"===a.nodeValue)throw"unresolved"}else a.children&&i(a)})}var d=c(37),e=c(39),f=c(62);avalon.component=function(a,b){avalon.components[a]||(avalon.components[a]=b)},avalon.directive("widget",{priority:4,parse:function(a,b,c){b.props.wid=b.props.wid||avalon.makeHashCode("w"),a[c.name]=avalon.parseExpr(c),a.template=b.template,a.vmodel="__vmodel__",a.local="__local__"},define:function(){return avalon.mediatorFactory.apply(this,arguments)},diff:function(a,b,c,e,g,i){var k,l,m,n,o,p,q,r,j=a[c];if(Object(j)===j){if(k=b.props.is||(/^ms\-/.test(b.type)?b.type:0),k||(j=j.$model||j,Array.isArray(j)&&(j.unshift({}),avalon.mix.apply(0,j),j=j.shift()),k=j.is),l="component-vm:"+k,b.props.is=k,b.vmodel=a.vmodel,!b[l]&&!f(b,a[c],a.local,a.template))return b.nodeType=8,b.nodeValue="unresolved component placeholder",e[i]=b,d(b,this.mountComment),void 0;if(m=b[l],n=avalon.scopes[m.$id],n&&n.vmodel&&(o=n.vmodel.$element,b.dom!==o))return p=o.vtree[0],g[i]=e[i]=p,b.com=o,p.skipContent||(p.skipContent="optimize"),d(b,this.replaceCachedComponent),d(p,function(){"optimize"===p.skipContent&&(p.skipContent=!0)},"afterChange"),void 0;q=m.$render,r=q(m,a.local),p=r[0],p&&h(p)?(p.local=a.local,b.dynamic=!0,Array(l,"component-html:"+k,"component-ready:"+k,"dom","dynamic").forEach(function(a){p[a]=b[a]}),p.vmodel=m,e[i]=p,8===b.nodeType&&b.comment&&(p.dom=b.comment,b.type="#comment"),b.type!==p.type?(g[i]=p,d(p,this.mountComponent)):d(b,this.updateComponent)):(b.nodeType=8,b.nodeValue="unresolved component placeholder",e[i]=b,d(b,this.mountComment))}else b.props.is===a.props.is&&d(b,this.updateComponent)},replaceCachedComponent:function(a,b,c){var d=b.com;c.replaceChild(d,a),delete b.com},mountComment:function(a,b,c){var d=document.createComment(b.nodeValue);b.dom=d,c.replaceChild(d,a)},updateComponent:function(a,b){var c=b["component-vm:"+b.props.is],e=c.$events.onViewChange;e&&e.length&&d(b,g,"afterChange")},mountComponent:function(a,b,c){var f=avalon.vdomAdaptor(b,"toDOM"),g=b.props.is,h=b["component-vm:"+g];h.$fire("onInit",{type:"init",vmodel:h,is:g}),e([f],[b]),c.replaceChild(f,a),b.dom=h.$element=f,f.vtree=[b],avalon.onComponentDispose(f),b["component-ready:"+g]=!0,avalon.scopes[h.$id]={vmodel:h,top:b.vmodel,local:b.local},d(b,function(){h.$fire("onReady",{type:"ready",target:f,vmodel:h,is:g})},"afterChange"),d(b,function(){b["component-html:"+g]=avalon.vdomAdaptor(b,"toHTML")},"afterChange")}})},function(a,b,c){function j(a,b,c,f){function x(a,b){w.forEach(function(c){delete a[c],delete b[c]})}var q,r,s,t,u,v,w,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,j=a.type,n=a.props.is;if(!e[j]&&!o(j))return avalon.warn(j+"不合适做组件的标签"),void 0;if(q={},b?(r=[].concat(b),r.forEach(function(a){a&&"object"==typeof a&&p(q,a.$model||a,!0)})):r=[],s=avalon.components[n]){if(!q.$id&&i&&(avalon.warn("warning!",n,"组件最好在ms-widget配置对象中指定全局不重复的$id以提高性能!\n","若在ms-for循环中可以利用 ($index,el) in @array 中的$index拼写你的$id\n","如 ms-widget=\"{is:'ms-button',$id:'btn'+$index}\""),i=!1),t=q.define,t=t||avalon.directives.widget.define,u=q.$id||a.props.wid||"w"+(new Date-0),v=avalon.mix(!0,{},s.defaults),p(q,v,!1),w=h.concat(),x.isWidget=!0,y=t.apply(x,[a.vmodel,v].concat(r)),!avalon.modern)for(z in y)d[z]||"function"!=typeof y[z]||(y[z]=y[z].bind(y));y.$id=u,avalon.vmodels[u]=y;for(A in g)q[A]&&q[A].forEach(function(a){y.$watch(A,a)});return B=avalon.lexer(f),C=B[0],D=C.children,D&&1===D.length&&D[0].nodeValue&&(C.children=avalon.lexer(D[0].nodeValue)),delete C.isVoidTag,delete C.template,delete C.skipContent,delete C.props["ms-widget"],C.type="cheng7",C.children=C.children||[],C.props.is=n,C.props.wid=u,avalon.speedUp(B),E=avalon.render(B,c),F=s.template.trim(),"function"==typeof s.getTemplate&&(F=s.getTemplate(y,F)),G=avalon.lexer(F),G.length>1&&avalon.error("组件必须用一个元素包起来"),H=s.soleSlot,m(G,H),avalon.speedUp(G),I=avalon.render(G),J=l+"",K=H?avalon.quote(H):"null",J=J.replace("XXXXX",k(E)).replace("YYYYY",k(I)).replace("ZZZZZ",K),L=J.indexOf("{")+1,M=J.lastIndexOf("}"),N=Function("vm","local",J.slice(L,M)),y.$render=N,a["component-vm:"+n]=y,y.$render=N}}function k(a){return a.toString().replace("anonymous","").replace(/\s*\/\*\*\//g,"")}function l(){var f,g,h,a=XXXXX(vm,local),b=a[0],c=YYYYY(vm,local),d=c[0],e={};String("ms-widget,"+b.order+","+d.order).replace(avalon.rword,function(a){"undefined"!==a&&(e[a]=a)}),b.order=Object.keys(e).join(",");for(f in b)"children"!==f&&"type"!==f&&("props"===f?avalon.mix(d.props,b.props):d[f]=b[f]);return g=ZZZZZ,h=avalon.collectSlots(b,g),!g||h[g]&&h[g].length||(h[g]=[{nodeType:3,type:"#text",nodeValue:vm[g],dynamic:!0}]),avalon.insertSlots(c,h),delete d.skipAttrs,delete d.skipContent,c}function m(a,b){for(var d,c=0;d=a[c];c++)"slot"===d.type?(a.splice(c,1,{type:"#comment",nodeValue:"slot:"+(d.props.name||b),nodeType:8,dynamic:d.props.name||b},{type:"#comment",nodeValue:"slot-end:",nodeType:8}),c++):1===d.nodeType&&d.children&&m(d.children,b)}function o(a){return n.test(a)}function p(a,b,c){var d,e;for(d in b)e=b[d],g[d]?d in a?a[d].push(e):a[d]=[b[d]]:c&&(a[d]=e)}var n,d=c(63),e={wbr:1,xmp:1,template:1},f="onInit,onReady,onViewChange,onDispose",g=avalon.oneObject(f),h=f.split(",").concat("is","define"),i=!0;a.exports=j,avalon.insertSlots=function(a,b){var d,c,e;for(c=0;d=a[c];c++)8===d.nodeType&&b[d.dynamic]?(e=[c+1,0].concat(b[d.dynamic]),a.splice.apply(a,e),c+=b[d.dynamic].length):1===d.nodeType&&d.children&&avalon.insertSlots(d.children,b)},avalon.collectSlots=function(a,b){var c={};return b?(c[b]=a.children,c.__sole__=b):a.children.forEach(function(b,d){var e,f;1===b.nodeType?(e=b.props.slot,e&&(Array.isArray(c[e])?c[e].push(b):c[e]=[b])):"for"===b.dynamic&&/slot=['"](\w+)/.test(b.template)&&(f=RegExp.$1,c[f]=a.children.slice(d,d+2))}),c},n=/^[a-z]([a-z\d]+\-)+[a-z\d]+$/},function(a){a.exports=avalon.oneObject("$id,$render,$track,$element,$watch,$fire,$events,$model,$skipArray,$accessors,$hashcode,$run,$wait,__proxy__,__data__,__const__")},function(a,b,c){function g(a,b){for(var c in a)if(a[c]!==b[c])return!0;return!1}function i(){if(!h.lock){var a=h[0];a&&(i.lock=!0,a())}}function l(a){var b=k.test(a)?1e3:1;return parseFloat(a)*b}function m(a,b,c){var d=a[b];d=Array.isArray(d)?d:"function"==typeof d?[d]:[],d.forEach(function(a){a&&a(c)})}function o(a){var b=a.toLowerCase();return function(c){var g,k,o,p,e=this.el,f=avalon(e),j=isFinite(c.stagger)?1e3*c.stagger:0;j&&c.staggerKey&&(k=n.get(c.staggerKey)||n.put(c.staggerKey,{count:0,items:0}),k.count++,k.items++),o=k&&k.count||0,p=function(b){var j,f=b!==!1;e.animating=void 0,g=!0,j=f?"Done":"Abort",m(c,"on"+a+j,e),avalon.unbind(e,d.transitionEndEvent),avalon.unbind(e,d.animationEndEvent),k&&0===--k.items&&(k.count=0),c.queue&&(h.lock=!1,h.shift(),i())},m(c,"onBefore"+a,e),c[b]?c[b](e,function(a){p(a!==!1)}):d.css&&(f.addClass(c[b+"Class"]),"leave"===b?f.removeClass(c.enterClass+" "+c.enterActiveClass):"enter"===b&&f.removeClass(c.leaveClass+" "+c.leaveActiveClass),f.bind(d.transitionEndEvent,p),f.bind(d.animationEndEvent,p),setTimeout(function(){var a,h,i,k;g=0/0===avalon.root.offsetWidth,f.addClass(c[b+"ActiveClass"]),a=window.getComputedStyle(e),h=a[d.transitionDuration],i=a[d.animationDuration],k=l(h)||l(i),0===!k?p(!1):j||setTimeout(function(){g||p(!1)},k+130)},17+j*o))}}function p(a){a.acton||(a.action=a.hook.replace(/^on/,"").replace(/Done$/,"").toLowerCase())}var h,j,k,n,d=c(65),e=c(28),f=c(37);avalon.directive("effect",{priority:5,diff:function(a,b,c){var e,d=a[c];d=a.$model||d,"string"==typeof d?(e=d,d={is:e}):Array.isArray(d)&&(d=avalon.mix.apply({},d)),d.action=d.action||"enter",Object(d)===d&&(a===b||g(d,b[c]||{}))&&(b[c]=d,f(b,this.update,"afterChange")),a!==b&&delete a[c]},update:function(a,b,c,e){var f,g,j,k,l,m,n,o;if(!a.animating){if(a.animating=!0,f=b["ms-effect"],g=f.is,e=e||{},!g)return avalon.warn("need is option");if(j=avalon.effects,d.css&&!j[g]&&avalon.effect(g,{}),k=j[g],!k)return avalon.warn(g+" effect is undefined");if(l=e.action||f.action,m=avalon.Effect,"function"!=typeof m.prototype[l])return avalon.warn(l+" action is undefined");n=new m(a),o=avalon.mix(e,k,f),o.queue?(h.push(function(){n[l](o)}),i()):setTimeout(function(){n[l](o)},4)}}}),h=[],avalon.effects={},avalon.effect=function(a,b){avalon.effects[a]=b||{},d.css&&(b.enterClass||(b.enterClass=a+"-enter"),b.enterActiveClass||(b.enterActiveClass=b.enterClass+"-active"),b.leaveClass||(b.leaveClass=a+"-leave"),b.leaveActiveClass||(b.leaveActiveClass=b.leaveClass+"-active")),b.action||(b.action="enter")},j=function(a){this.el=a},avalon.Effect=j,j.prototype={enter:o("Enter"),leave:o("Leave"),move:o("Move")},k=/\d+s$/,n=new e(128),avalon.applyEffect=function(a,b,c){var g,d=c.cb,e=c.hook,f=b["ms-effect"];f&&!avalon.document.hidden?(g=f[e],d&&(Array.isArray(g)?g.push(d):f[e]=g?[g,d]:[d]),p(c),a.animate=!0,avalon.directives.effect.update(a,b,0,avalon.shadowCopy({},c))):d&&d()}},function(a){var f,g,l,m,p,c=!1,d=!1,e=!1,h=avalon.cssName("transition-duration"),i=avalon.cssName("animation-duration"),j={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},k=avalon.window;for(m in j){if(k[m]){l=j[m];break}try{document.createEvent(m),l=j[m];break}catch(o){}}"string"==typeof l&&(c=!0,e=!0,f=l),j={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};for(m in j)if(k[m]){p=j[m];break}"string"==typeof p&&(d=!0,e=!0,g=p),a.exports={transition:c,animation:d,css:e,transitionEndEvent:f,animationEndEvent:g,transitionDuration:h,animationDuration:i}},function(a,b,c){function e(a,b){var f,g,h,c=Array.isArray(a)?d(a):a,e=[];if(b)for(f in b)e.push("var "+f+" = __local__["+avalon.quote(f)+"]");g="__local__ = __local__ || {};\n"+e.join(";\n")+"\n"+c;try{h=Function("__vmodel__","__local__",g)}catch(i){avalon.warn(c,"parse error")}return h}avalon.lexer=c(67),avalon.diff=c(69),avalon.batch=c(70);var d=c(71);avalon.render=e,a.exports=avalon},function(a,b,c){function l(a){var b,c,f,l,s,u,v,w,x,z,B,C,D,E,F,G;k={},a=r(a),b=[],b.last=function(){return b[b.length-1]},c=[],f=1e5;do{if(l=!1,"<"!==a.charAt(0)&&(s=a.indexOf("<"),s=-1===s?a.length:s,u=a.slice(0,s).replace(t,y),a=a.slice(s),l={type:"#text",nodeType:3,nodeValue:u},h.test(u)&&o(l,b,c)),l||(s=a.indexOf("<!--"),0===s&&(v=a.indexOf("-->"),-1===v&&avalon.error("注释节点没有闭合"+a),u=a.slice(4,v).replace(t,y),a=a.slice(v+3),l={type:"#comment",nodeType:8,nodeValue:u},o(l,b,c),g.test(u)&&(w=b.last(),x=w?w.children:c,n(x,x.pop())))),!l&&(z=a.match(d)))if(B=z[1].toLowerCase(),C=i[B]||"/"===z[3],l={type:B,nodeType:1,props:{},children:[],isVoidTag:C},D=z[2],D&&p(D,l.props),o(l,b,c),a=a.slice(z[0].length),C)l.fire=l.isVoidTag=!0;else if(b.push(l),j[B]&&(E=a.indexOf("</"+B+">"),F=a.slice(0,E).trim(),a=a.slice(E),F))switch(B){case"style":case"script":case"noscript":case"template":case"xmp":l.skipContent=!0,F&&l.children.push({nodeType:3,type:"#text",skipContent:!0,nodeValue:q(F)});break;case"textarea":l.skipContent=!0,l.props.type="textarea",l.props.value=q(F);break;case"option":l.children.push({nodeType:3,type:"#text",nodeValue:q(A(F))})}if(l||(z=a.match(e),z&&(B=z[1].toLowerCase(),G=b.last(),G?G.type!==B&&avalon.error(G.type+"没有闭合"):avalon.error(z[0]+"前面缺少<"+B+">"),l=b.pop(),l.fire=!0,a=a.slice(z[0].length))),!l||0===--f)break;l.fire&&(m(l,b,c),delete l.fire)}while(a.length);return c}function m(a,b,c){var f,g,h,i,j,d=a.type,e=a.props;switch(d){case"input":e.type||(e.type="text");break;case"select":e.type=d+"-"+e.hasOwnProperty("multiple")?"multiple":"one";break;case"table":B(a.children);break;default:0===d.indexOf("ms-")&&(e.is=d,e["ms-widget"]||(e["ms-widget"]="{is:"+avalon.quote(d)+"}")),e["ms-widget"]&&(a.template=avalon.vdomAdaptor(a,"toHTML"))}f=e["ms-for"],f&&(delete e["ms-for"],g=b.last(),h=g?g.children:c,h.splice(h.length-1,0,{nodeType:8,type:"#comment",nodeValue:"ms-for:"+f}),i=e["data-for-rendered"],j=i+":cb",i&&!avalon.caches[j]&&(avalon.caches[j]=Function("return "+avalon.parseExpr(i,"on"))()),n(h,{nodeType:8,type:"#comment",nodeValue:"ms-for-end:"}))}function n(a,b){b.dynamic=!0,b.signature=avalon.makeHashCode("for");for(var d,c=[],e=1;d=a.pop();){if(8===d.nodeType)if(g.test(d.nodeValue))++e;else if(f.test(d.nodeValue)&&(--e,0===e)){d.nodeValue=d.nodeValue.replace(t,y),d.signature=b.signature,d.dynamic="for",d.template=c.map(function(a){return avalon.vdomAdaptor(a,"toHTML")}).join(""),a.push(d,[],b);break}c.unshift(d)}}function o(a,b,c){var d=b.last();d?d.children.push(a):c.push(a)}function p(a,b){a.replace(v,function(a){var c=a.split("="),d=c[0],e=c[1]||"";":"===d.charAt(0)&&(d="ms-"+d.slice(1)),e&&0===e.indexOf("??")&&(e=q(e).replace(u,"").replace(/\"/g,"'").slice(1,-1)),d in b||(b[d]=e)})}function q(a){return avalon.unescapeHTML(a.replace(t,y))}function r(a){var c,d,b=s(a);for(c=0,d=b.length;d>c;c++)a=a.replace(b[c],x);return a}function s(a){var b,e,f,g,c=0,d=[];for(e=0,f=a.length;f>e;e++)if(g=a.charAt(e),b){if("\\"===g){e+=1;continue}g===b&&(d.push(a.slice(c,e+1)),b=!1)}else"'"===g?(b="'",c=e):'"'===g&&(b='"',c=e);return d}function x(a){var b="??"+w++;return k[b]=a,b}function y(a){var b=k[a];return b}function A(a){return String(a).replace(z,"").trim()}function B(a){var b,g,h,c=!1,d=0,e=0,f=a.length;for(g=0;f>g;g++)h=a[g],b?"tr"!==h.type&&1===h.nodeType?b=!1:(b.children.push(h),d++,a[g]=0):"tr"===h.type&&(b={nodeType:1,type:"tbody",children:[],props:{}},b.children.push(h),c=!0,0===e&&(e=g),a[g]=b);if(c)for(g=e;f>g&&(0!==a[g]||(a.splice(g,1),g--,d--,0!==d));g++);}var t,u,v,w,z,d=/^<([-A-Za-z0-9_]+)\s*([^>]*?)(\/?)>/,e=/^<\/([^>]+)>/,f=/^\s*ms\-for\:/,g=/^\s*ms\-for\-end/,h=/\S/,i=avalon.oneObject("area,base,basefont,bgsound,br,col,command,embed,frame,hr,img,input,keygen,link,meta,param,source,track,wbr"),j=avalon.oneObject("script,style,textarea,xmp,noscript,option,template"),k={};c(68),a.exports=l,t=/\?\?\d+/g,u=/\n\s*/g,v=/\S+/g,w=1,z=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi},function(){function c(a){switch(a.nodeType){case 3:return avalon.config.rbind.test(a.nodeValue)?(a.dynamic="expr",!0):(a.skipContent=!0,!1);case 8:return a.dynamic?!0:(a.skipContent=!0,!1);case 1:if(a.props["ms-skip"])return a.skipAttrs=!0,a.skipContent=!0,!1;if(/^ms\-/.test(a.type)||f(a.props)?a.dynamic=!0:a.skipAttrs=!0,a.isVoidTag&&!a.dynamic)return a.skipContent=!0,!1;var b=d(a.children);return b||a.dynamic?!0:(a.skipContent=!0,!1);default:if(Array.isArray(a))return d(a)}}function d(a){var e,d,b=!1;for(d=0;e=a[d++];)c(e)&&(b=!0);return b}function f(a){if("ms-skip"in a)return!1;for(var b in a)if(e.test(b))return!0;return!1}avalon.speedUp=function(a){for(var b=0;b<a.length;b++)c(a[b]);return a};var e=/^(\:|ms\-)\w/},function(a){function g(a,b){var c,f,j;for(c=0;c<a.length;c++)switch(f=a[c],j=b[c]||d(),f.nodeType){case 3:f.dynamic&&e.expr.diff(f,j);break;case 8:"for"===f.dynamic?e["for"].diff(f,j,a,b,c):j.afterChange&&h(j,j.afterChange);break;case 1:f.order&&i(a,b,c),f=a[c],j=b[c],1!==f.nodeType||f.skipContent||f.isVoidTag||g(f.children,j&&j.children||[]),j&&j.afterChange&&h(j,j.afterChange);break;default:Array.isArray(f)&&g(f,j)}}function h(a,b){if(b.length)for(var c,d=0;c=b[d++];)c(a.dom,a);delete a.afterChange}function i(a,b,c){var h,i,j,k,l,m,n,o,g=a[c].order;if(g){h=g;try{for(i=g.match(avalon.rword),j={},k=0;k<i.length;k++)l=i[k],j[l]||(j[l]=1,m=l.match(f),n=m&&m[1],e[n]&&e[n].diff(a[c],b[c]||d(),l,a,b,c),o=a[c].order,o?o!==h&&i.push.apply(i,o.match(avalon.rword)):i.splice(0,i.length))}catch(p){avalon.warn(n,p,p.stack||p.message,"diffProps error")}}}var d=function(){return{children:[],props:{}}},e=avalon.directives,f=/^ms-(\w+)-?(.*)/;avalon.diffProps=i,a.exports=g},function(a,b,c){function g(a){var b,c,h,i,j,k,l,m,n;return f?avalon.Array.ensure(e,a):(f=a,b=avalon.scopes[a],b&&document.nodeName&&!avalon.suspendUpdate?(c=b.vmodel,h=c.$element,i=h.vtree||[],j=c.$render,k=j(b.vmodel,b.local),b.isTemp&&(d([h],i,h.parentNode),delete avalon.scopes[a]),avalon.diff(k,i),l=e.indexOf(f),f=0,l>-1?(m=e.splice(l,1),g(m[0])):(n=e.shift(),n&&g(n),void 0)):f=null)}var d=c(39),e=[],f=!1;avalon.suspendUpdate=0,a.exports=avalon.batch=g},function(a,b,c){function m(a,b){var e,d,f,g,c=b?[]:["\nvar vnodes = [];"];for(d=0;e=a[d++];)f=n(e),e.$prepend&&c.push(e.$prepend),g=e.$append,delete e.$append,delete e.$prepend,f&&c.push(f+"\n"),g&&c.push(g);return b||c.push("return vnodes\n"),c.join("\n")}function n(a){var b,c,e,g,i,j,n,o,s;switch(a.nodeType){case 3:return h.rexpr.test(a.nodeValue)&&!a.skipContent?p(r(a)):p(u(a));case 1:return a.skipContent&&a.skipAttrs?p(u(a)):(b={props:{},type:a.type,nodeType:1},c=d(b,a.props),e=c.map(function(c){return avalon.directives[c.type].parse(b,a,c),c.name}).join(","),e&&(b.order=e),a.isVoidTag?b.isVoidTag=!0:"children"in b||(g=a.children,b.children=g.length?"(function(){"+m(g)+"})()":"[]"),a.template&&(b.template=a.template),a.skipContent&&(b.skipContent=!0),a.skipAttrs&&(b.skipAttrs=!0),a.dynamic&&(b.dynamic=!0),q(b));case 8:if(i=a.nodeValue,"for"===a.dynamic){0!==i.indexOf("ms-for:")&&avalon.error("ms-for指令前不能有空格"),b={dynamic:"for",vmodel:"__vmodel__"};for(j in a)a.hasOwnProperty(j)&&!l[j]&&(b[j]=a[j]);return avalon.directives["for"].parse(b,a,a),a.$append+=m(avalon.speedUp(avalon.lexer(a.template)),!0),q(b)}return"ms-for-end:"===i?(a.$append=q({nodeType:8,type:"#comment",nodeValue:a.signature,key:"traceKey"})+"\n},__local__,vnodes)\n"+q({nodeType:8,type:"#comment",signature:a.signature,nodeValue:"ms-for-end:"})+"\n",""):0===i.indexOf("ms-js:")?(n=f(i.replace("ms-js:",""),"js")+"\n",o=q(a),s=n.match(k),s&&s[1]?a.$append=(a.$append||"")+n+"\n__local__."+s[1]+" = "+s[1]+"\n":avalon.warn(i+" parse fail!"),o):a.dynamic?q(a):p(u(a))}}function o(a){return j.test(a)?a:f(a,"text")}function p(a){return"vnodes.push("+a+");"}function q(a){return p(e(a))}function r(a){var d,b=t(a.nodeValue),c="";return 1===b.length?c=o(b[0].expr):(d=b.map(function(a){return a.type?o(a.expr):i(a.expr)}).join(" + "),c="String("+d+")"),'{\ntype: "#text",\nnodeType:3,\ndynamic:true,\nnodeValue: '+c+"\n}"}function t(a){var c,d,b=[];do c=a.indexOf(h.openTag),c=-1===c?a.length:c,d=a.slice(0,c),/\S/.test(d)&&b.push({expr:g(d)}),a=a.slice(c+h.openTag.length),a&&(c=a.indexOf(h.closeTag),d=a.slice(0,c),b.push({expr:avalon.unescapeHTML(d.replace(s,"")),type:"{{}}"}),a=a.slice(c+h.closeTag.length));while(a.length);return b}function u(a){var b;switch(a.nodeType){case 1:b=a.type+";"+Object.keys(a.props).sort().map(function(b){return b+"-"+a.props[b]}).join(";")+";"+avalon.vdomAdaptor(a,"toHTML").length;break;case 3:case 8:b=a.nodeType+";"+a.nodeValue}return avalon.caches[b]=a,"avalon.getCachedNode("+i(b)+")"}var s,d=c(72),e=c(50),f=c(73),g=c(16),h=avalon.config,i=avalon.quote,j=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,k=/^\s*var\s+([$\w]+)\s*\=\s*\S+/,l={__local__:1,vmode:1,dom:1};a.exports=m,s=/\n\s*/g,avalon.getCachedNode=function(a){return avalon.caches[a]}},function(a){function f(a,b){var j,l,k,m,n,o,p,q,f=[],h="ms-skip"in b,i={};for(j in b)k=b[j],!h&&(l=j.match(d))?(m=l[1],n=l[2]||"",o=j,e[m]&&(p=parseFloat(n)||0,n=m,m="on"),o="ms-"+m+(n?"-"+n:""),j!==o&&(delete b[j],b[o]=k),c[m]&&(q={type:m,param:n,name:o,expr:k,priority:c[m].priority||100*m.charCodeAt(0)},"on"===m&&(p=p||0,q.name+="-"+p,q.priority=100*n.charCodeAt(0)+p),i[q.name]||(i[q.name]=1,f.push(q)))):a.props[j]=b[j];return f.sort(g),f}function g(a,b){return a.priority-b.priority}var c=avalon.directives,d=/^ms-(\w+)-?(.*)/,e=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");a.exports=f},function(a,b,c){function p(a,b){var c=a.replace(n,"").match(o);c&&c.filter(function(a){/^[@\d\-]/.test(a)||"##"===a.slice(0,2)||"$event"===a||avalon.keyMap[a]||(b[a]=1)})}function q(a){var c,b=[];for(c in a)b.push("var "+c+" = __local__["+avalon.quote(c)+"]");return b}function r(a,b){function u(a){var b="??"+r++;return t[b]=a,b}function v(a){return t[a]}var n,o,r,t,w,x,y,z,A,B,C,D,E,c={};if(b=b||"other","object"==typeof a&&(b=a.type,c=a,a=c.expr),"string"!=typeof a)return"";if(n=a,o=d.get(b+":"+n))return o;if(r=1,t={},w=a.replace(e,u).replace(f,u).replace(i,u).replace(k,"$1").split(j),x=w.shift(),y={},z=x.replace(g,v).trim(),"on"===b&&m.test(z)&&(z+="($event)"),z=z.replace(l,"$1__vmodel__."),"js"===b)return d.put(b+":"+n,z);if("on"===b&&p(x,y),A=w.map(function(a){p(a.replace(/^\w+/g,""),y),a=a.replace(g,v).replace(l,"$1__vmodel__.");var b=!1;return a=a.replace(h,function(a,c){return b=!0,/\S/.test(c)?"(__value__,"+c+");":"(__value__);"}),b||(a+="(__value__);"),a=a.replace(/(\w+)/,'avalon.__format__("$1")'),"__value__ = "+a}),B=[],"on"===b)A=A.map(function(a){return a.replace(/__value__/g,"$event")}),A.length&&A.push("if($event.$return){\n	return;\n}"),avalon.modern||(z=z.replace(/__vmodel__\.([^(]+)\(([^)]*)\)/,function(a,b,c){return"__vmodel__."+b+".call(__vmodel__"+(/\S/.test(c)?","+c:"")+")"})),B=["function ms_on($event, __local__){","try{",q(y).join("\n"),"	var __vmodel__ = this;","	"+z,"}catch(e){",s(a,b),"}","}"],A.unshift(2,0);else{if("duplex"===b)return C=["function (__vmodel__){","try{","return "+z+"\n","}catch(e){",s(a,b).replace("parse","get"),"}","}"],d.put("duplex:"+n,C.join("\n")),D=["function (__vmodel__,__value__){","try{","	"+z+" = __value__","}catch(e){",s(a,b).replace("parse","set"),"}","}"],d.put("duplex:set:"+n,D.join("\n")),w.length&&(E=["function (__vmodel__, __value__){","try{",A.join("\n"),"return __value__\n","}catch(e){",s(a,b).replace("parse","format"),"}","}"],d.put("duplex:format:"+n,E.join("\n"))),d.get("duplex:"+n);B=["(function(){","try{","var __value__ = "+z,"text"===b?"return avalon.parsers.string(__value__)":"return __value__","}catch(e){",s(a,b),'	return ""',"}","})()"],A.unshift(3,0)}return B.splice.apply(B,A),o=B.join("\n"),d.put(b+":"+n,o),o}function s(a,b){return"	avalon.warn(e, "+avalon.quote("parse "+b+" binding【 "+a+" 】fail")+")"}var d=c(49),e=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,f=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,g=/\?\?\d+/g,h=/\(([^)]*)\)/,i=/\|\|/g,j=/\|(?=\w)/,k=/\s*(\.|\|)\s*/g,l=/(^|[^\w\u00c0-\uFFFF_])(@|##)(?=[$\w])/g,m=/^(?:\@|##)[$\w\.]+$/i,n=/\|.+/g,o=/((?:\@|\$|\#\#)?\w+)/g;a.exports=avalon.parseExpr=r},function(a,b,c){function h(a){a.addEventListener("DOMNodeRemovedFromDocument",function(){g(a)})}function i(){function b(b,c){var d=a[b];a[b]=function(a,b){return c.call(this,d,a,b)}}function e(a){var b=avalon.slice(this.getElementsByTagName("*"));d.call(this,a),f(b)}var a,d,c,h;i.execute||(i.execute=!0,a=Node.prototype,b("removeChild",function(a,b,c){return a.call(this,b,c),1===b.nodeType&&g(b),b}),b("replaceChild",function(a,b,c){return a.call(this,b,c),1===b.nodeType&&g(b),b}),c=Element.prototype,Object.getOwnPropertyDescriptor?(h=Object.getOwnPropertyDescriptor(c,"innerHTML"),d=h.set,h.set=e,Object.defineProperty(c,"innerHTML",h)):(d=c.__lookupSetter__("innerHTML"),c.__defineSetter__("innerHTML",e)),b("appendChild",function(a,b){return a.call(this,b),1===b.nodeType&&11===this.nodeType&&g(b),b}),b("insertBefore",function(a,b,c){return a.call(this,b,c),1===b.nodeType&&11===this.nodeType&&g(b),b}))}function l(a){avalon.Array.ensure(j,a),k||(k=setInterval(function(){for(var b,a=0;b=j[a];)!1===e(b)?avalon.Array.removeAt(j,a):a++;0==j.length&&(clearInterval(k),k=0)},700))}var d=c(75),e=d.fireDisposeHook,f=d.fireDisposeHooks,g=d.fireDisposeHookDelay,j=[],k=0;a.exports=function(a){window.chrome&&window.MutationEvent?h(a):avalon.modern&&"function"==typeof window.Node?i(a):l(a)}},function(a){function c(a){for(;a;){if(9===a.nodeType)return!0;a=a.parentNode}return!1}function d(a){var b,d,f,g,h;if(1===a.nodeType&&a.getAttribute("wid")&&!c(a)){if(b=a.getAttribute("wid"),d=avalon.scopes[b],!d)return;return f=d.vmodel,d.vmodel.$fire("onDispose",{type:"dispose",target:a,vmodel:f}),d&&!a.getAttribute("cached")&&(delete d.vmodel,delete avalon.scopes[b],g=a.getAttribute("is"),h=a.vtree,e(h),h&&(h[0][g+"-mount"]=!1,h[0]["component-ready:"+g]=!1)),!1}}function e(a){var b,c;for(b in a)if(c=a[b],1===c.nodeType){for(b in c)0===b.indexOf("ms-on")&&delete c[b];c.children&&e(c.children)}}function f(a){setTimeout(function(){d(a)},4)}function g(a){for(var c,b=0;c=a[b++];)d(c)}a.exports={fireDisposeHookDelay:f,fireDisposeHooks:g,fireDisposeHook:d}},function(a,b,c){function o(){}function p(a,b,c){var g,h,m,p,q,r,s,t,u,d={};a.$skipArray&&(d=avalon.oneObject(a.$skipArray),delete a.$skipArray),g={},c=c||{},b=b||{},h={},m=n("$"),p=c.pathname||"",c.id=c.id||m,c.hashcode=c.hashcode||m;for(q in a)i[q]||(t=g[q]=a[q],f(q,t,d)||(r=c.id+"."+q,s=p?p+"."+q:q,h[q]=j(r,s,b)));h.$model=l,u=new o,u=e(u,h,a);for(q in g)u[q]=g[q],q in d?delete g[q]:g[q]=!0;return k(u,b,g,h,c),u}function r(a,b,c,d){var p,r,s,t,u,v,g={},h={},m={};c=c||{},p=d.pathname,r=a.$accessors||{};for(s in b)i[s]||(g[s]=!0,f(s,b[s],q)?(h[s]=b[s],delete b[s]):r[s]?m[s]=r[s]:(t=d.id+"."+s,u=p?p+"."+s:s,m[s]=j(t,u,c)));d.hashcode=a.$hashcode||n("$"),m.$model=l,v=new o,v=e(v,m,h);for(s in h)v[s]=h[s];return k(v,c,g,m,d),v}function s(a){var d,q,r,s,t,u,v,w,x,c={},g={},h={},l={},m=avalon.slice(arguments),p={};for(q=0;q<m.length;q++){r=m[q];for(d in r)r.hasOwnProperty(d)&&("$skipArray"===d&&Array.isArray(r.$skipArray)&&r.$skipArray.forEach(function(a){p[a]=1}),c[d]=r[d],u=r.$accessors,u&&u[d]?-1===m.indexOf(r[d])?g[d]=u[d]:(s=c[d],t=d,delete c[d]):"function"!=typeof c[d]&&(h[d]=1))}"function"==typeof this&&this(c,h);for(d in h)i[d]||g[d]||f(d,c[d],p)||(g[d]=j(a.$id,d,l),g[d].set(c[d]));v=new o,v=e(v,g,c),w="function"==typeof this&&this.isWidget;for(d in c)g[d]||(v[d]=c[d]),w&&g[d]&&s&&s.hasOwnProperty(d)&&(x=g[d].get,x.$decompose||(x.$decompose={}),x.$decompose[t+"."+d]=v),d in i?delete c[d]:c[d]=!0;return k(v,l,c,g,{id:a.$id,hashcode:n("$"),master:!0}),v}function w(a,b){a.length!==b&&a.notify("length",a.length,b,!0)}var q,t,u,v,x,d=c(77),e=c(81),f=d.isSkip,g=d.toJson,h=d.$$midway,i=d.$$skipArray,j=d.makeAccessor,k=d.initViewModel,l=d.modelAccessor,m=d.modelAdaptor,n=avalon.makeHashCode;h.masterFactory=p,q={},h.slaveFactory=r,h.mediatorFactory=avalon.mediatorFactory=s,t=d.__array__,u=Array.prototype,v=u.splice,t.removeAll=function(a){var c,d,b=this.length;if(Array.isArray(a))for(c=this.length-1;c>=0;c--)-1!==a.indexOf(this[c])&&v.call(this,c,1);else if("function"==typeof a)for(c=this.length-1;c>=0;c--)d=this[c],a(d,c)&&v.call(this,c,1);else v.call(this,0,this.length);avalon.modern||(this.$model=g(this)),w(this,b),this.notify()},x=["push","pop","shift","unshift","splice"],x.forEach(function(a){var b=u[a];t[a]=function(c,d){var h,i,j,k,l,n,o,p,e=[],f=this.length;if("splice"===a&&Object(this[0])===this[0])for(h=this.slice(c,d),i=u.slice.call(arguments,2),e=[c,d],j=0,k=i.length;k>j;j++)l=h[j],e[j+2]=m(i[j],l,l&&l.$events||{},{id:this.$id+".*",master:!0});else for(n=0,o=arguments.length;o>n;n++)e[n]=m(arguments[n],0,{},{id:this.$id+".*",master:!0});return p=b.apply(this,e),avalon.modern||(this.$model=g(this)),w(this,f),this.notify(),p}}),"sort,reverse".replace(avalon.rword,function(a){t[a]=function(){return u[a].apply(this,arguments),avalon.modern||(this.$model=g(this)),this.notify(),this}}),a.exports=avalon},function(a,b,c){function g(a){var c,d,e,f,b=avalon.type(a);if("array"===b){for(c=[],d=0;d<a.length;d++)c[d]=g(a[d]);return c}if("object"===b){e={};for(d in a)"__proxy__"!==d&&"__data__"!==d&&"__const__"!==d&&a.hasOwnProperty(d)&&(f=a[d],e[d]=f&&f.nodeType?f:g(f));return e}return a}function h(a,b,c){e?Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!1,configurable:!0}):a[b]=c}function j(a,b,c,d,e){function j(a){return c[a]===!0}e.array?avalon.modern?Object.defineProperty(a,"$model",i):a.$model=g(a):(h(a,"$accessors",d),h(a,"hasOwnProperty",j),h(a,"$track",Object.keys(c).sort().join(";;"))),h(a,"$id",e.id),h(a,"$hashcode",e.hashcode),e.master===!0&&(h(a,"$run",function(){l.call(a)}),h(a,"$wait",function(){k.call(a)}),h(a,"$element",null),h(a,"$render",0),f(a,b))}function k(){this.$events.$$wait$$=!0}function l(){var b,c,a=this.$events;delete a.$$wait$$,a.$$dirty$$&&(delete a.$$dirty$$,avalon.rerenderStart=new Date,b=this.$id,c=b.indexOf("."),c>0?avalon.batch(b.slice(0,c)):avalon.batch(b))}var m,n,d=c(78),e=c(80),f=d.initEvents,i={get:function(){return g(this)},set:avalon.noop,enumerable:!1,configurable:!0};d.$$midway.initViewModel=j,d.$$midway.hideProperty=h,m={toJson:g,initViewModel:j,modelAccessor:i};for(n in d)m[n]=d[n];a.exports=m},function(a,b,c){function i(a,b){b.__vmodel__=a;var c=d.hideProperty;c(a,"$events",b),c(a,"$watch",function(){if(2===arguments.length)return h.apply(a,arguments);throw"$watch方法参数不对"}),c(a,"$fire",function(b,c,d){var e=a.$events[b];g(e,a,b,c,d)})}function k(a,b,c){return"$"===a.charAt(0)||c[a]||j.test(avalon.type(b))||b&&b.nodeName&&b.nodeType>0}function l(a,b,c,f){var g,h;if(Array.isArray(a))return d.arrayFactory(a,b,c,f);if(Object(a)===a&&"function"!=typeof a){if(b&&b.$id){++avalon.suspendUpdate,g=b.$track!==Object.keys(a).sort().join(";;")?d.slaveFactory(b,a,c,f):b;for(h in a)e[h]||(g[h]=a[h]);return--avalon.suspendUpdate,g}return g=d.masterFactory(a,c,f)}return a}function m(a,b,c){function f(){return e}var e=0/0;return f.heirloom=c,{get:f,set:function(h){var i,j;if(e!==h&&(i=c.__vmodel__,h&&"object"==typeof h&&(h=d.modelAdaptor(h,e,c,{pathname:b,id:a})),j=e,e=h,this.$hashcode&&i)){if(i.$events.$$dirty$$=!0,i.$events.$$wait$$)return;c!==i.$events&&(f.heirloom=i.$events),q(f.$decompose,b,h,j),-1===b.indexOf("*")&&g(f.heirloom[b],i,b,h,j),p(a+"",i,b,h,j),r(f.heirloom,i,b,h,j),i.$events.$$dirty$$=!1,n(i.$id)}},enumerable:!0,configurable:!0}}function n(a){avalon.rerenderStart=new Date;var b=a.indexOf(".");b>0?avalon.batch(a.slice(0,b)):avalon.batch(a)}function p(a,b,c,d,e){var f,h,i;a.indexOf(".*.")>0&&(f=a.match(o),h=avalon.vmodels[f[1]],h&&(i=f[2],g(h.$events[i],b,c,d,e)))}function q(a,b,c,d){var e,f;a&&a[b]&&(e=a[b],e.$hashcode?(f=b.replace(/^[^.]+\./,""),f!==b&&g(e.$events[f],e,f,c,d)):delete a[b])}function r(a,b,c,d,e){a.__fuzzy__&&a.__fuzzy__.replace(avalon.rword,function(f){var h=a[f],i=h.reg;return i&&i.test(c)&&g(h,b,c,d,e),f})}function s(a){var c,b=a.$id;if(!b&&avalon.config.debug&&avalon.warn("vm.$id must be specified"),avalon.vmodels[b])throw Error("error:["+b+"] had defined!");return c=d.masterFactory(a,{},{pathname:"",id:b,master:!0}),avalon.vmodels[b]=c}function t(a,b,c,e){var f,g,h,i,j;if(b&&b.splice)return f=[0,b.length].concat(a),++avalon.suspendUpdate,b.splice.apply(b,f),--avalon.suspendUpdate,b;for(g in u)a[g]=u[g];for(a.notify=function(a,b,d,f){var h,g=c.__vmodel__;g&&(h=null===a||void 0===a?e.pathname:e.pathname+"."+a,g.$fire(h,b,d),f||c.$$wait$$||avalon.suspendUpdate||n(g.$id))},h=avalon.makeHashCode("$"),e.array=!0,e.hashcode=h,e.id=e.id||h,d.initViewModel(a,c,{},{},e),i=0,j=a.length;j>i;i++)a[i]=l(a[i],0,{},{id:a.$id+".*",master:!0});return a}var o,u,d={},e=c(63),f=c(79),g=f.$emit,h=f.$watch,j=/function|window|date|regexp|element/i;d.modelAdaptor=l,o=/([^.]+)\.(.+)/,d.arrayFactory=t,u={set:function(a,b){if(a>>>0===a&&this[a]!==b){if(a>this.length)throw Error(a+"set方法的第一个参数不能大于原数组长度");this.splice(a,1,b)}},contains:function(a){return-1!==this.indexOf(a)},ensure:function(a){return this.contains(a)||this.push(a),this},pushArray:function(a){return this.push.apply(this,a)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){return a>>>0===a?this.splice(a,1):[]},clear:function(){return this.removeAll(),this}},avalon.define=s,a.exports={$$midway:d,$$skipArray:e,isSkip:k,__array__:u,initEvents:i,makeAccessor:m,modelAdaptor:l}},function(a){function c(a,b){var d,c=b.split(".")[0];try{a.hasOwnProperty(c)&&(d=a.$accessors?a.$accessors[c].get.heirloom.__vmodel__:Object.getOwnPropertyDescriptor(a,c).get.heirloom.__vmodel__)
}catch(e){}return d||a}function d(a){var b=a.split(".");return new RegExp("^"+b.map(function(a){return"*"===a?"(?:[^.]+)":a}).join("\\.")+"$","i")}function e(a,b,c){a&&(b.__fuzzy__?-1===b.__fuzzy__.indexOf(","+c)&&(b.__fuzzy__+=","+c):b.__fuzzy__=c)}function f(a,b){var c=a.indexOf(".*")>0||"*"===a,g=c?this:f.adjust(this,a),h=g.$events,i=h[a]||(h[a]=[]);return c&&(i.reg=i.reg||d(a)),e(c,h,a),g!==this&&(e(c,this.$events,a),this.$events[a]=i),avalon.Array.ensure(i,b),function(){avalon.Array.remove(i,b)}}function g(a,b,c,d,e,f){if(a&&a.length)try{for(f=f||a.length-1;f>=0;f--){var h=a[f];h.call(b,d,e,c)}}catch(i){f-1>0&&g(a,b,c,d,e,f-1),avalon.log(i,c)}}f.adjust=c,a.exports={$emit:g,$watch:f,adjustVm:c}},function(a){var c=!0;try{Object.defineProperty({},"_",{value:"x"})}catch(d){c=!1}a.exports=c},function(a,b,c){function j(a,b,c,d){var e=b[c];return 4!==arguments.length?e.get.call(a):(e.set.call(a,d),void 0)}var g,i,d=c(80),e=c(63),f=Object.defineProperties,h=new Date-0;d||("__defineGetter__"in avalon&&(g=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},f=function(a,b){for(var c in b)b.hasOwnProperty(c)&&g(a,c,b[c]);return a}),avalon.msie&&(i={},window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),f=function(a,b,c){var f,g,k,l,d=[];d.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d"+h+", p"+h+")","		Set [__data__] = d"+h+": set [__proxy__] = p"+h,"		Set [__const__] = Me","	End Function"),f={__proxy__:!0,__data__:!0,__const__:!0};for(a in b)f[a]=!0,d.push("	Public Property Let ["+a+"](val"+h+")",'		Call [__proxy__](Me,[__data__], "'+a+'", val'+h+")","	End Property","	Public Property Set ["+a+"](val"+h+")",'		Call [__proxy__](Me,[__data__], "'+a+'", val'+h+")","	End Property","	Public Property Get ["+a+"]","	On Error Resume Next","		Set["+a+'] = [__proxy__](Me,[__data__],"'+a+'")',"	If Err.Number <> 0 Then","		["+a+'] = [__proxy__](Me,[__data__],"'+a+'")',"	End If","	On Error Goto 0","	End Property");for(a in c)f[a]!==!0&&(f[a]=!0,d.push("	Public ["+a+"]"));for(a in e)f[a]!==!0&&(f[a]=!0,d.push("	Public ["+a+"]"));return d.push("	Public [hasOwnProperty]"),d.push("End Class"),g=d.join("\r\n"),k=i[g],k||(k=avalon.makeHashCode("VBClass"),window.parseVB("Class "+k+g),window.parseVB(["Function "+k+"Factory(a, b)","	Dim o","	Set o = (New "+k+")(a, b)","	Set "+k+"Factory = o","End Function"].join("\r\n")),i[g]=k),l=window[k+"Factory"](b,j)})),a.exports=f}])});